# 类型-按钮显示设置

定义了一项【按钮】在什么位置如何显示。  
【按钮】相当于【数值】的【血条】部分，但是具体显示细节不同。  
【按钮】包含了一整行的多个实际的按钮，具体显示什么按钮以及如何显示它们，则由【按钮显示设置】关联的【主体】决定。  
【主体】可能是单位，也可能是 Buff，还可能是某些全局结构。



## 注册

位于 `rulesmd.ini`：

```ini
[PackTypes.DigitalButtonSetting]
0=DigitalButtonSetting1
1=DigitalButtonSetting2
2=DigitalButtonSetting3
```

### 注意

* 索引从 0 开始。

* 此类型并不需要注册，只是提供了这个功能。



## 完整结构

位于 `rulesmd.ini`：

```ini
[SomeDigitalButtonSetting]
; 显示设置
DisplayType=Default                             ; 显示类型 , 如何显示【按钮】 , 具体显示的【按钮】取决于提供数值的【主体】 , 默认值是 Default (不区分大小写)
                                                ; Default , 默认 , 使用【主体】规定的默认项目
                                                ; Horizontal , 水平 , 横着显示【按钮】
                                                ; Hexagon , 六边形 , 像建筑血条那样的倾斜
                                                ; Hexagon2 , 六边形2 , 像建筑血条那样的倾斜 , 只不过是在右侧的
Owner=Self                                      ; 作战方归属 , 谁可以看到
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Self (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 字符连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Observer=no                                     ; yes/no , 观察者是否可以看到 , 默认值是 no
Show.Signs=yes                                  ; yes/no , 显示【按钮】上的字 , 有些种类的按钮是有字的 , 默认值是 yes
Show.Bars=yes                                    ; yes/no , 显示【按钮】 , 默认值是 yes
Show.BarBuffers=yes                             ; yes/no , 显示【按钮】的缓冲残影 (就是进度条 , 性能略微低一点) , 默认值是 yes

; 图像设置
; 暂不支持 pcx 文件
Pal=                                            ; pal 文件名称 , 使用的色盘 , 不含后缀名 , 默认值是 palette (即使用默认色盘)
Shps.Bars=                                      ; 四个 shp 文件名称 , 【按钮】使用的【正常】【停留】【点击】【禁用】素材 , 不含后缀名 , 默认值是 空 (即不显示)
                                                ; 优先级高于分开写的 , 两种方式二选一 , 只写一个时则全部相同
Shp.Bars.Full=                                  ; shp 文件名称 , 【按钮】使用的【正常】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Green=                                 ; shp 文件名称 , 【按钮】使用的【停留】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Yellow=                                ; shp 文件名称 , 【按钮】使用的【点击】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Red=                                   ; shp 文件名称 , 【按钮】使用的【禁用】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Background=                            ; shp 文件名称 , 【按钮】使用的背景素材 , 不含后缀名 , 默认值是 空 (即不显示)

; 对齐设置
; 计算对齐时会按照未进行偏移的情况来对齐 , 即对齐时不考虑 Offset , Offset.Bars 两个属性
HorizontalAlign=Center                          ; 水平对齐方式 , 整体的水平对齐 , 可用值 : Left , Right , Center , 默认值是 Center (不区分大小写)
                                                ; 水平对齐会受到 Size 的宽度的影响 , Left = 从最左端向右绘制 , Right = 从最右端向左绘制 , Center = 从中间向左右绘制 , 不涉及水平翻转
VerticalAlign=Center                            ; 垂直对齐方式 , 整体的垂直对齐 , 可用值 : Top , Bottom , Center , 默认值是 Center (不区分大小写)
                                                ; 垂直对齐会受到 Size 的高度的影响 , Top = 从最顶端向下绘制 , Bottom = 从最底端向上绘制 , Center = 从中间向上下绘制 , 不涉及垂直翻转

; 偏移设置
; 对于所有的偏移坐标 Offset , 往右 X 增加 , 往上 Y 增加
ColumnType=Center                               ; 队列类型 , 在哪个队列显示【按钮】 (用于自动偏移) , 可用值 : Left , Right , Center , None , 默认值是 Center (不区分大小写)
                                                ; 一共提供了 3 个自动偏移队列 , Left = 建筑血条位置 , Right = 建筑血条的水平镜像位置 (建筑右侧) , Center = 步兵和载具血条位置
                                                ; 这里只是定义了使用哪个位置队列 , 并不限制单位类型 , 建筑也可以使用 Center , 步兵和载具也可以使用 Left 和 Right
                                                ; 处于队列中时 , 显示的位置会自动进行额外的偏移 , 若 ColumnType=None 则不进行额外的偏移
PixelSelectionBracketDelta=yes                  ; yes/no , 是否计算单位的 PixelSelectionBracketDelta 属性的值 , 默认值是 yes
Offset=0,0                                      ; 两个整数 , 整体的偏移坐标 , 默认值是 0,0 , 单位 : 像素
Offset.Bars=0,0                                 ; 两个整数 , 【按钮】的偏移坐标 , 默认值是 0,0 , 单位 : 像素
Offset.Bars.Background=0,0                      ; 两个整数 , 【按钮】的背景的额外偏移坐标 , 在【按钮】的偏移坐标基础上进行偏移 , 默认值是 0,0 , 单位 : 像素
Spacing.BarPips=60                              ; 整数 , 【按钮】中每个按钮的间距 , 0 = 重叠在一起 , 负数 = 从右往左排列 , 默认值是 60 (参考于提供的基础素材) , 单位 : 像素

; 面积设置
; 图形的面积不由素材的实际大小控制 , 而是由这些面积属性控制
; 面积不会限制【按钮】的实际显示情况 , 即【按钮】是可以超出面积显示的
; 对于 Hexagon 和 Hexagon2 显示类型 , 高度是不计入倾斜结果的
Size=60,48                                      ; 两个整数 , 宽度和高度 ,  负数或 0 = 使用【主体】提供的数据 , 默认值是 60,48 (参考于提供的基础素材) , 单位 : 像素/格 (对应侧的边长)
                                                ; 此为对齐的基准 , 进行对齐时会以 Size 为空间进行对齐
                                                ; 【主体】提供的各项数据是适用于【血条】的 , 还请注意
Size.Bars=60,48                                 ; 两个整数 , 宽度和高度 , 用于确定【按钮】的空间 , 小于 0 按 0 算 , 默认值是 60,48 (参考于提供的基础素材) , 单位 : 像素
Count.BarPips=1                                 ; 整数 , 【按钮】的按钮数 , 固定值 , 小于 0 按 0 算 , 默认值是 1 (参考于提供的基础素材) , 单位 : 个
                                                ; 由于显示方面的限制 , 按钮数最多为 6 个

; 点击设置
Click.Owner=Self                                ; 作战方归属 , 谁可以点击按钮
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Self (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 字符连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Click.Observer=no                               ; yes/no , 观察者是否可以点击按钮 , 默认值是 no
```

参考数据：  
游戏内的一个地板格子的大小是 60 * 30 像素（水平 * 垂直）。  
游戏内的一个单位图标的大小是 60 * 48 像素（水平 * 垂直）。

### 注意

* 请勿在模式或地图的 ini 中修改此类型的属性。

* 不要使用太多的独立色盘，够用就行了。

* `Show.Bars=no` 等于白写，因为不会显示出来。

* 出于优化的考量，当单位距离屏幕区域过远时，会暂停显示【按钮】（默认值是 `240` 像素）。



## 素材规格

提供了一套基础素材，请见 `相关素材` 文件夹。

【按钮】的单个素材需要 4 帧，分别位于 4 个对应的素材里，换句话说，就是素材有几帧，就可以显示几个按钮（由于显示方面的限制 , 按钮数最多为 6 个）。  
背景的素材只使用第 1 帧的图像。

由于需要使用专门的素材，因此我专门制作了一个简单的工具，请进群获取。  
**反馈 QQ 群：486835964**