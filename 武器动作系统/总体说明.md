# 武器动作系统总体说明

当武器的武器动作列表不为空时，会在开火阶段的最后触发武器动作，常规武器、死亡武器、Buff 武器均可以触发，超武则可以使用 EMP 炮超武来触发武器动作。



## 动态的武器动作

武器动作支持每个单位独立，即使它们是同种单位使用同种武器。  
动态的武器动作是默认启用的，就算一个单位没有具有武器动作的武器也没关系，仍然可以后天获得武器动作。  
要关闭这个特性需要在单位拥有 `ActionSelfOnly=no` 属性。  
虽然叫武器动作，但是实际上 `轨迹` 也支持武器动作。

### 注意

* Buff 武器暂不支持武器动作。



## 全新的武器轨迹

武器轨迹其实就是另一种抛射体，只不过换了个名字而已。  
主要是因为原本的抛射体耦合性太高难以维护，因此不得不弄了一个新的出来。  
当然新的自然有新的好处，它可以支持更多更复杂的逻辑，同时也更易于使用。



## 武器条件

`武器条件` 决定了 `武器动作` 是否可以触发，以及需要何种代价。

假如说这个武器开火需要消耗 1 弹药，那么 `武器动作` 中的 `武器条件` 可以设置为 `单位至少需要拥有 1 弹药` 并且 `需要消耗 1 弹药` 作为代价。  
这样一来，当单位有目标，并且拥有至少 1 弹药时，会先扣掉 1 弹药，然后触发 `武器动作` 中的各项 `武器效果`。  

这里需要注意的是，武器开火后，`武器效果` 的生效过程是独立于 `代价` 的，可能出现消耗了 `代价` 但是并没有开出火来的情况。  
`武器条件` 是作为 `代价` 被消耗掉的，相当于用 1 弹药买了一次开火的机会，就算实际没开出火来（即所有 `武器效果` 都没有生效的场合），作为 `代价` 的弹药也并不会被返还。

（就像消耗 1000 点生命值发送魔法卡，但是魔法卡被对面搞掉了并没有生效，但是作为发送魔法卡的代价的 1000 点生命值并不会被返还。）