# 功能扩展-自定义军衔

扩展了自定义军衔的功能（强制启用）。（未完成）

### 注意

* 由于逻辑冲突，已经屏蔽了 ARES 和 Phobos 的自定义军衔，因此可能会丢失一些以前存在的特性（不管是不是有意为之的）。



## 全局设置

```ini
[General]
EnemyInsignia=yes                               ; yes/no , 敌对作战方是否可以看到军衔 (看不到则会隐藏所有的军衔) , 默认值是 yes
DefaultInsigniaSet=DefaultInsignia              ; 军衔图像设置 , 显示的军衔的默认值 , 默认值是 DefaultInsignia (即会自动载入 [DefaultInsignia] 作为此项的值)
```

可以修改 `DefaultInsigniaSet` 的值或是创建（修改） `[DefaultInsignia]` 块来改变默认行为。

### 注意

* 请勿在模式或地图的 ini 中修改 `EnemyInsignia` 和 `DefaultInsigniaSet` 属性。



## 单位属性

位于 `rulesmd.ini`：

```ini
[SomeTechnoType]
; 军衔图像设置
InsigniaSet=                                    ; 军衔图像设置 , 显示的军衔 (此项会覆盖 ARES 的各项对应属性) , 默认值是 [General] -> DefaultInsigniaSet 的值
InsigniaSetEnemy=                               ; 军衔图像设置 , 敌对作战方显示的军衔 , 默认值是 InsigniaSet 属性的值
InsigniaSet.WeaponX=                            ; 军衔图像设置 , Gunner=yes 使用第 X 个武器时显示的军衔 (此项会覆盖 Phobos 的各项对应属性) , 默认值是 InsigniaSet 属性的值
InsigniaSetEnemy.WeaponX=                       ; 军衔图像设置 , Gunner=yes 使用第 X 个武器时敌对作战方显示的军衔 , 默认值是 InsigniaSet.WeaponX 属性的值
InsigniaSet2=                                   ; 军衔图像设置 , 显示的军衔 2 , 这是一个独立的显示位置 , 所以它有什么用呢 , 默认值是 空
; 其他属性
Insignia.ShowEnemy=yes                          ; yes/no , 敌对作战方是否可以看到军衔 (看不到则会隐藏所有的军衔) , 默认值是 [General] -> EnemyInsignia 的值
```

详见 [类型-军衔图像设置](/其他新类型/类型-军衔图像设置.md#类型-军衔图像设置)。



## 与 ARES 和 Phobos 的自定义军衔的兼容性

现在仍然会读取 ARES 和 Phobos 的自定义军衔的属性。  
由于读取这些属性后会尝试转化为现在的数据结构，因此可能在功能细节上会有所不同。

如果使用了 `InsigniaSet`，则不会再读取 ARES 的相关属性；
如果使用了 `InsigniaSet.WeaponX`，则不会再读取 Phobos 的相关属性；。

以下是一些读取、处理顺序：

1. `InsigniaFrame` 会作为 `InsigniaFrame.Rookie`、`InsigniaFrame.Veteran`、`InsigniaFrame.Elite` 的默认值使用。

2. `Insignia.WeaponN` 会作为 `Insignia.WeaponN.Rookie`、`Insignia.WeaponN.Veteran`、`Insignia.WeaponN.Elite` 的默认值使用。

3. `InsigniaFrame.WeaponN` 会作为 `InsigniaFrame.WeaponN.Rookie`、`InsigniaFrame.WeaponN.Veteran`、`InsigniaFrame.WeaponN.Elite` 的默认值使用。

4. 如果设置了 `InsigniaFrames.WeaponN` 则它的值会尝试覆盖 `InsigniaFrame.WeaponN.Rookie`、`InsigniaFrame.WeaponN.Veteran`、`InsigniaFrame.WeaponN.Elite` 的值（分别对应索引 0、1、2，填写了才尝试覆盖）。

### 注意

* 由于数据结构转化的原因，请避免在模式或地图的 ini 中修改 ARES 和 Phobos 的自定义军衔的属性（指修改无效）。

* 如果使用 ARES 和 Phobos 的自定义军衔的属性来实现效果的话，是不支持新增的属性的，还请注意。