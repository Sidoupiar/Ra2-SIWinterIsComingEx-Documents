# 属性-单位

## 提供经验值

可以微调单位死亡后提供的经验值。

位于 `rulesmd.ini`：

```ini
[SomeTechnoType]
EXP.Provide=0                                   ; 浮点数 , 单位死亡后向击杀单位提供的经验值 , 可以是负数 , 但是负数太多可能导致单位升不了级 , 默认值是 Cost 的值 , 单位 : 点
EXP.ProvideOwner=Enemy,Neutral                  ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Enemy,Neutral (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 只向符合作战方的单位提供经验值 , 作战方是相对于死亡单位和击杀单位的
```

### 注意

* 这些属性仅对 WIC 提供的经验渠道有效



## 获取经验值

定义一个单位如何获取和分配经验值。  
单位实际获得经验值需要 `Trainable=yes`，只影响单位自己，不影响经验值的分配。

位于 `rulesmd.ini`：

```ini
[SomeTechnoType]
; 初始经验值
EXP.StartUp=0                                   ; 浮点数 , 单位出厂时会获得这么多经验值 , 默认值是 0

; 升级经验值
EXP.Cost=0                                      ; 浮点数 , 单位升级所需的经验值 , 需要大于 0 (否则后果自负) , 默认值是 Cost 的值 , 单位 : 点
EXP.Ratio=3                                     ; 浮点数 , 单位升级所需的经验值倍率 , 小于 0 视为 0 处理 , 默认值是 [EXPControls] -> EXP.Ratio 的值
EXP.Owner=Enemy,Neutral                         ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Enemy,Neutral (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 只吸收符合作战方的单位的经验值 , 作战方是相对于死亡单位和实际获得经验值的单位的
EXP.CanReduce=no                                ; yes/no , 单位是否可以接受负数的经验值 , 负数经验值仍会正常分配 , 只是不起作用 , 默认值是 no

; 与旧经验系统的交互
; 以下相关属性仅对击杀经验和 WIC 提供的经验渠道有效
EXP.Old=no                                      ; yes/no , 是否启用与旧经验系统的交互 , 默认值是 [EXPControls] -> EXP.Old 的值
EXP.OldPercent=0                                ; 浮点数 , 每次获得经验值时 , 旧经验系统的获得量比例 , 默认值是 [EXPControls] -> EXP.OldPercent 的值
                                                ; 如果这里填写 0.8 , 则单位获得 100 经验值 , 那么新经验系统获得 100 经验值 , 旧经验系统获得 80 经验值
EXP.NewPercent=1                                ; 浮点数 , 每次获得经验值时 , 新经验系统的获得量比例 , 默认值是 [EXPControls] -> EXP.NewPercent 的值
EXP.OldCost=0                                   ; 浮点数 , 旧经验系统中单位升级所需的经验值 , 需要大于 0 (否则后果自负) , 默认值是 Cost 的值 , 单位 : 点
EXP.OldRatio=3                                  ; 浮点数 , 旧经验系统中单位升级所需的经验值倍率 , 小于 0 视为 0 处理 , 默认值是 [EXPControls] -> EXP.OldRatio 的值
EXP.OldOwner=Enemy,Neutral                      ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Enemy,Neutral (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 只吸收符合作战方的单位的经验值 , 作战方是相对于死亡单位和实际获得经验值的单位的

; 载员经验值 , 写载员或载具上
; 载员控制载员自己 , 载具控制所有载员 , 载具优先级更高一点
EXP.Passenger=no                                ; yes/no , 载员击杀时 , 载具是否可以获得经验值 , 默认值是 [EXPControls] -> EXP.Passenger 的值
EXP.PassengerRatio=1                            ; 浮点数 , 载员击杀时 , 载具可以获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.PassengerRatio 的值
EXP.PassengerRatioPass=1                        ; 浮点数 , 载员击杀时 , 载员可以获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.PassengerRatioPass 的值

; 载具经验值 , 写载具上
EXP.Transport=no                                ; yes/no , 载具击杀时 , 载员是否可以获得经验值 , 平均分给各个可以升级的载员 , 默认值是 [EXPControls] -> EXP.Transport 的值
EXP.TransportRatio=1                            ; 浮点数 , 载具击杀时 , 载具可以获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.TransportRatio 的值
EXP.TransportRatioPass=1                        ; 浮点数 , 载具击杀时 , 载员可以获得的经验值的比例 (所有载员均分) , 默认值是 [EXPControls] -> EXP.TransportRatioPass 的值

; IFV 经验值 , 写 IFV 上
EXP.IFV=no                                      ; yes/no , IFV 击杀时 , IFV 位载员是否可以获得经验值 , 默认值是 [EXPControls] -> EXP.IFV 的值
EXP.IFVRatio=1                                  ; 浮点数 , IFV 击杀时 , 载具可以获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.IFVRatio 的值
EXP.IFVRatioPass=1                              ; 浮点数 , IFV 击杀时 , IFV 位载员可以获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.IFVRatioPass 的值

; 空袭经验值 , 写空袭召唤者上
EXP.Airstrike=no                                ; yes/no , 召唤者是否可以从空袭中获得经验值 , 默认值是 [EXPControls] -> EXP.Airstrike 的值
EXP.AirstrikeRatio=1                            ; 浮点数 , 召唤者从空袭中获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.AirstrikeRatio 的值

; 心控经验值 , 写心控者上
EXP.MindControl=no                              ; yes/no , 心控者是否可以获得经验值 , 默认值是 [EXPControls] -> EXP.MindControl 的值
EXP.MindControlRatio=1                          ; 浮点数 , 心控者获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.MindControlRatio 的值
EXP.MindRatio=1                                 ; 浮点数 , 被心控者获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.MindRatio 的值

; 航母经验值 , 写航母上
EXP.SpawnOwner=no                               ; yes/no , 航母是否可以获得经验值 , 默认值是 [EXPControls] -> EXP.SpawnOwner 的值
EXP.SpawnOwnerRatio=0                           ; 浮点数 , 航母获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.SpawnOwnerRatio 的值
EXP.SpawnRatio=1                                ; 浮点数 , 舰载机获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.SpawnRatio 的值

; 驻军经验值 , 写建筑上
EXP.Occupy=no                                   ; yes/no , 驻军是否可以获得经验值 , 默认值是 [EXPControls] -> EXP.Occupy 的值
EXP.OccupyRatio=1                               ; 浮点数 , 建筑获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.OccupyRatio 的值
EXP.OccupantRatio=1                             ; 浮点数 , 驻军获得的经验值的比例 , 默认值是 [EXPControls] -> EXP.OccupantRatio 的值
```

### 注意

* 载员获得经验值时，对于特定的载具且载具的 `EXP.Passenger=yes` 时，载具上的经验值分配设置会覆盖载员上的。

* 由于兼容性的问题，对旧经验系统不提供负数经验值（含降级）相关的功能。

* 与 ARES 的特性会有一些不同：

|序号|说明|
|:-:|:-|
|1|启用分配，那么目标单位就会获得一份等额的经验值。|
|2|不启用分配，就不会向任何自己以外的目标分配经验值。|
|3|对于载员通过发动空袭获得经验时，经验并不会分配给载具，则是由于实际获得经验值的单位并不是载员导致的；心控和航母同理。|
|4|由于是重构的逻辑，因此在比较复杂的情况下，可能会出现一个单位获得好几份经验值的情况，如果遇到此种问题，请反馈。|



## 升级行为

位于 `rulesmd.ini`：

```ini
[SomeTechnoType]
Level.Max=2                                     ; 浮点数 , 单位最多可以升多少级 , 默认值是 [EXPControls] -> Level.Max 的值
Level.SetX=                                     ; 单位升级设置 , 升到或降到 X 级时应用此设置 , 从等级 0 开始 , 跨级时挨个生效 (闪烁 , 声音 , 动画 和 类型转换 除外) , 留空表示这级没有任何效果 , 默认值是 [EXPControls] -> Level.SetX 的值
```

另见 [类型-单位升级设置](/其他新类型/类型-单位升级设置.md#类型-单位升级设置)。

### 注意

* 如果在模式或地图 ini 中修改了 `Level.Max`，则需要同时补充缺少的 `Level.SetX`，不论以前是否存在这些设置。

* 旧经验系统的升级仍然遵从来源的逻辑，这里并不提供新的支持。

* 有几个特殊情况需要注意：  

|序号|说明|
|:-:|:-|
|1|等级 0 是初始级别，单位出厂时会直接处于这个级别，出厂时不算升级到等级 0 ；等级 1 是老兵级别；等级 2 是精英级别。|
|2|等级 0 的效果只能通过降级获得，即便通过负数等级升上来也不会获得等级 0 的效果；最高级的效果只能通过升级获得。|
|3|如果涉及单位降级的话，那么等级 0 也要写单位升级设置，否则降到等级 0 时单位身上已有的加成属性将无法被正确移除。|
|4|如果单位一口气获得了很多经验，那么他是可以一口气升很多级的，中间跳过的等级的效果会依次获得，但是闪烁、声音、动画 和 类型转换 等这类不同级别会互相覆盖的效果只有最终等级的才能获得。|
|5|单位的实际等级不能低于 `0`，也不能高于 `Level.Max` 的值，但是单位的实际经验值不受等级的限制，因此单位收到了异常多的经验或收到了异常少的经验，可能会导致单位无法正常升级。|
|6|对于升级变形中的单位类型，请勿填写出厂经验值，这可能导致一些意料之外的情况发生，而单位的经验值是会正常继承的；而出厂标记则看实际需求，它们会正常地挂载上。|



## 自定义军衔

原有的军衔属性均失效，请使用新属性。  
属性已合并至 [类型-单位升级设置](/其他新类型/类型-单位升级设置.md#类型-单位升级设置)。



## 旧经验系统的升级设置

ARES 的那些属性，之后补充说明。

位于 `rulesmd.ini`：

```ini
[SomeTechnoType]
; 复用已有的属性
Promote.VeteranSound=UpgradeVeteran             ; 声音 , 单位升级到老兵等级时播放的声音 , 默认值是 [EXPControls] -> Promote.VeteranSound 的值
Promote.EliteSound=UpgradeElite                 ; 声音 , 单位升级到精英等级时播放的声音 , 默认值是 [EXPControls] -> Promote.EliteSound 的值
Promote.VeteranFlash=0                          ; 整数 , 单位升级到老兵等级时闪光的时间 , 默认值是 [EXPControls] -> Promote.VeteranFlash 的值 , 单位 : 帧
Promote.EliteFlash=200                          ; 整数 , 单位升级到精英等级时闪光的时间 , 默认值是 [EXPControls] -> Promote.EliteFlash 的值 , 单位 : 帧
EVA.VeteranPromoted=                            ; EVA 语音 , 单位升级到老兵等级时播放的 EVA 语音 , 默认值是 [EXPControls] -> EVA.VeteranPromoted 的值
EVA.ElitePromoted=EVA_UnitPromoted              ; EVA 语音 , 单位升级到精英等级时播放的 EVA 语音 , 默认值是 [EXPControls] -> EVA.ElitePromoted 的值
Promote.VeteranType=                            ; 单位类型 , ARES 的升变 (WIC 不读取 , 写在这里仅表示兼容它)
Promote.EliteType=                              ; 单位类型 , ARES 的升变 (WIC 不读取 , 写在这里仅表示兼容它)
Promote.VeteranExperience=                      ; 浮点数 , ARES 的升变 (WIC 不读取 , 写在这里仅表示兼容它)
Promote.EliteExperience=                        ; 浮点数 , ARES 的升变 (WIC 不读取 , 写在这里仅表示兼容它)
```

### 注意

* 一般来说升变是可以混用的，但是出于稳定性考虑，升变方式应选择一种而不要混用。



## 旧经验系统的自定义军衔

ARES 和 Phobos 的那些属性，之后补充说明。

位于 `rulesmd.ini`：

```ini
[SomeTechnoType]
Insignia.OldLevel=no                            ; yes/no , 是否使用 [SomeLevelSetting] 中的旧经验系统的军衔图像而非单位属性中的 , 默认值是 [EXPControls] -> Insignia.OldLevel 的值
                                                ; yes = 使用 [SomeLevelSetting] 中的 , no = 使用单位属性中的
Insignia.Old=no                                 ; yes/no , 是否显示旧经验系统的军衔图像 , 默认值是 [EXPControls] -> Insignia.Old 的值
; 复用已有的属性
Insignia.ShowEnemy=yes                           ; yes/no , 旧经验系统中敌对作战方是否可以看到军衔 (看不到则会隐藏所有的军衔) , 默认值是 [EXPControls] -> Insignia.OldShowEnemy 的值
Insignia.Rookie=                                ; shp 文件名称 , 旧经验系统中新兵等级时显示的军衔 , 不含后缀名 , 默认值是 空 (即不显示)
Insignia.Veteran=                               ; shp 文件名称 , 旧经验系统中老兵等级时显示的军衔 , 不含后缀名 , 默认值是 空 (即不显示)
Insignia.Elite=                                 ; shp 文件名称 , 旧经验系统中精英等级时显示的军衔 , 不含后缀名 , 默认值是 空 (即不显示)
InsigniaFrame=-1                                ; 整数 , 旧经验系统中显示的军衔图像帧 , 默认值是 -1 (即默认帧 , 新兵等级 = -1 , 老兵等级 = 14 , 精英等级 = 15)
InsigniaFrame.Rookie=-1                         ; 整数 , 旧经验系统中新兵等级时显示的军衔图像帧 , 默认值是 InsigniaFrame 的值
InsigniaFrame.Veteran=-1                        ; 整数 , 旧经验系统中老兵等级时显示的军衔图像帧 , 默认值是 InsigniaFrame 的值
InsigniaFrame.Elite=-1                          ; 整数 , 旧经验系统中精英等级时显示的军衔图像帧 , 默认值是 InsigniaFrame 的值
Insignia.WeaponX=                               ; shp 文件名称 , 旧经验系统中 Gunner=yes 使用第 X 个武器时显示的军衔 , 不含后缀名 , 默认值是 空 (即不显示)
Insignia.WeaponX.Rookie=                        ; shp 文件名称 , 旧经验系统中新兵等级时 Gunner=yes 使用第 X 个武器时显示的军衔 , 不含后缀名 , 默认值是 Insignia.WeaponX 的值
Insignia.WeaponX.Veteran=                       ; shp 文件名称 , 旧经验系统中老兵等级时 Gunner=yes 使用第 X 个武器时显示的军衔 , 不含后缀名 , 默认值是 Insignia.WeaponX 的值
Insignia.WeaponX.Elite=                         ; shp 文件名称 , 旧经验系统中精英等级时 Gunner=yes 使用第 X 个武器时显示的军衔 , 不含后缀名 , 默认值是 Insignia.WeaponX 的值
InsigniaFrame.WeaponX=-1                        ; 整数 , 旧经验系统中 Gunner=yes 使用第 X 个武器时显示的军衔图像帧 , 默认值是 -1 (即默认帧 , 新兵等级 = -1 , 老兵等级 = 14 , 精英等级 = 15)
InsigniaFrame.WeaponX.Rookie=-1                 ; 整数 , 旧经验系统中新兵等级时 Gunner=yes 使用第 X 个武器时显示的军衔图像帧 , 默认值是 InsigniaFrame.WeaponX 的值
InsigniaFrame.WeaponX.Veteran=-1                ; 整数 , 旧经验系统中老兵等级时 Gunner=yes 使用第 X 个武器时显示的军衔图像帧 , 默认值是 InsigniaFrame.WeaponX 的值
InsigniaFrame.WeaponX.Elite=-1                  ; 整数 , 旧经验系统中精英等级时 Gunner=yes 使用第 X 个武器时显示的军衔图像帧 , 默认值是 InsigniaFrame.WeaponX 的值
InsigniaFrames.WeaponX=-1,-1,-1                 ; 三个整数 , 旧经验系统中总体设定 3 个等级时 Gunner=yes 使用第 X 个武器时显示的军衔图像帧 , 默认值是 -1,-1,-1 (即默认帧 , 新兵等级 = -1 , 老兵等级 = 14 , 精英等级 = 15)
```

### 注意

* `InsigniaFrames.WeaponX` 的优先级高于 `InsigniaFrame.WeaponX.YYYY` 属性。  
当设定了 `InsigniaFrames.WeaponX` 时，不再读取 `InsigniaFrame.WeaponX.YYYY` 属性。

* 和 IFV 一样，`WeaponX` 的 `X` 从 `1` 开始。