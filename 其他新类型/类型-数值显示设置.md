# 类型-数值显示设置

定义了一项【数值】在什么位置如何显示。  
【数值】包括了最多 4 项实际的数值和相关的【括号字符】和【连接字符】，以及一个与之匹配的【血条】。  
具体显示什么数值以及如何显示它们，则由【数值显示设置】关联的【主体】决定。  
【主体】可能是单位，也可能是标记，还可能是某些全局结构。



## 注册

位于 `rulesmd.ini`：

```ini
[PackTypes.DigitalSetting]
0=DigitalSetting1
1=DigitalSetting2
2=DigitalSetting3
```

### 注意

* 索引从 0 开始。

* 此类型并不需要注册，只是提供了这个功能。



## 完整结构

位于 `rulesmd.ini`：

```ini
[SomeDigitalSetting]
; 图像设置
Pal=                                            ; pal 文件名称 , 使用的色盘 , 不含后缀名 , 默认值是 palette (即使用默认色盘)
Shp.Characters.Full=                            ; shp 文件名称 , 【字符】使用的【满血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Characters.Green=                           ; shp 文件名称 , 【字符】使用的【绿血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Characters.Yellow=                          ; shp 文件名称 , 【字符】使用的【黄血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Characters.Red=                             ; shp 文件名称 , 【字符】使用的【红血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Characters.Background=                      ; shp 文件名称 , 【字符】使用的背景素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Full=                                  ; shp 文件名称 , 【血条】使用的【满血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Green=                                 ; shp 文件名称 , 【血条】使用的【绿血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Yellow=                                ; shp 文件名称 , 【血条】使用的【黄血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Red=                                   ; shp 文件名称 , 【血条】使用的【红血】素材 , 不含后缀名 , 默认值是 空 (即不显示)
Shp.Bars.Background=                            ; shp 文件名称 , 【血条】使用的背景素材 , 不含后缀名 , 默认值是 空 (即不显示)

; 显示设置
DisplayType=Default                             ; 显示类型 , 如何显示【数值】 , 具体显示的【数值】取决于提供数值的【主体】 , 默认值是 Default (不区分大小写)
                                                ; Default , 默认 , 使用【主体】规定的默认项目
                                                ; Horizontal , 水平 , 横着显示【字符】
                                                ; Hexagon , 六边形 , 像建筑血条那样的倾斜
                                                ; Hexagon2 , 六边形2 , 像建筑血条那样的倾斜 , 只不过是在右侧的
Owner=All                                       ; 作战方归属 , 谁可以看到
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 字符连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Observer=yes                                    ; yes/no , 观察者是否可以看到 , 默认值是 yes
Show.Characters=yes                             ; yes/no , 显示【字符】 , 默认值是 yes
Show.Value=yes                                  ; yes/no , 显示【当前值】以及相关的【括号字符】和【连接字符】 , 默认值是 yes
Show.Max=yes                                    ; yes/no , 显示【最大值】以及相关的【括号字符】和【连接字符】 , 默认值是 yes
Show.Min=no                                     ; yes/no , 显示【最小值】以及相关的【括号字符】和【连接字符】 , 默认值是 no
Show.Addon=no                                   ; yes/no , 显示【增加值】以及相关的【括号字符】和【连接字符】 , 默认值是 no
Show.Percent=no                                 ; yes/no , 是否以百分比的形式显示【当前值】 , 此时 【当前值】 = 【当前值】 / 【最大值】 , 结果转换为百分比并保留 2 位有效数字 , 默认值是 no
Show.Bars=no                                    ; yes/no , 显示【血条】 , 【血条】会体现【当前值】和【最大值】并显示在所有【字符】的左侧 , 默认值是 no
Show.BarBuffers=no                              ; yes/no , 显示【血条】的缓冲残影 (性能略微低一点) , 默认值是 no
ConditionGreen=1                                ; 浮点数 , 当 【当前值】/【最大值】 的值小于这个比例时使用对应的素材 , 不包括【等于】 , 小于 0 按 0 算 , 默认值是 1
ConditionYellow=0.5                             ; 浮点数 , 当 【当前值】/【最大值】 的值小于这个比例时使用对应的素材 , 不包括【等于】 , 小于 0 按 0 算 , 默认值是 0.5
ConditionRed=0.25                               ; 浮点数 , 当 【当前值】/【最大值】 的值小于这个比例时使用对应的素材 , 不包括【等于】 , 小于 0 按 0 算 , 默认值是 0.25

; 对齐设置
; 计算对齐时会按照未进行偏移的情况来对齐 , 即对齐时不考虑 Offset , Offset.Character , Offset.Bar 三个属性
HorizontalAlign=Left                            ; 水平对齐方式 , 可用值 : Left , Right , Center , 默认值是 Left (不区分大小写)
                                                ; 水平对齐会受到 Size 的宽度的影响 , Left = 从最左端向右绘制 , Right = 从最右端向左绘制 , Center = 从中间向左右绘制 , 不涉及水平翻转
VerticalAlign=Center                            ; 垂直对齐方式 , 可用值 : Top , Bottom , Center , 默认值是 Right (不区分大小写)
                                                ; 垂直对齐会受到 Size 的高度的影响 , Top = 从最顶端向下绘制 , Bottom = 从最底端向上绘制 , Center = 从中间向上下绘制 , 不涉及垂直翻转

; 字符设置
; 取值范围 : 1 - 25 , 分别对应 "0123456789.+-*/= _%#$[]<>" 字符 , 负数或 0 = 不显示
; 实际上如果素材拥有更多帧的话 , 这里也可以填写更大的数字
Brackets.Value=-1,-1                            ; 两个整数 , 显示在【当前值】前后的【括号字符】 , 默认值是 -1,-1
Brackets.Max=-1,-1                              ; 两个整数 , 显示在【最大值】前后的【括号字符】 , 默认值是 -1,-1
Brackets.Min=-1,-1                              ; 两个整数 , 显示在【最小值】前后的【括号字符】 , 默认值是 -1,-1
Brackets.Addon=-1,-1                            ; 两个整数 , 显示在【增加值】前后的【括号字符】 , 默认值是 -1,-1
Separators.Value=-1                             ; 整数 , 显示在【当前值】前面的【连接字符】 , 默认值是 -1
Separators.Max=15                               ; 整数 , 显示在【最大值】前面的【连接字符】 , 默认值是 15
Separators.Min=15                               ; 整数 , 显示在【最小值】前面的【连接字符】 , 默认值是 15
Separators.Addon=15                             ; 整数 , 显示在【增加值】前面的【连接字符】 , 默认值是 15

; 偏移设置
; 对于所有的偏移坐标 Offset , 往右 X 增加 , 往上 Y 增加
ColumnType=Center                               ; 队列类型 , 在哪个队列显示【数值】 (用于自动偏移) , 可用值 : Left , Right , Center , None , 默认值是 Center (不区分大小写)
                                                ; 一共提供了 3 个自动偏移队列 , Left = 建筑血条位置 , Right = 建筑血条的水平镜像位置 (建筑右侧) , Center = 步兵和载具血条位置
                                                ; 这里只是定义了使用哪个位置队列 , 并不限制单位类型 , 建筑也可以使用 Center , 步兵和载具也可以使用 Left 和 Right
                                                ; 处于队列中时 , 显示的位置会自动进行额外的偏移 , 若 ColumnType=None 则不进行额外的偏移
DirectionType=Right                             ; 方向类型 , 【字符】在【血条】的哪边 , 需要 Show.Bars=yes , 可用值 : Left , Right , Top , Bottom , 默认值是 Right
PixelSelectionBracketDelta=yes                  ; yes/no , 是否计算单位的 PixelSelectionBracketDelta 属性的值 , 默认值是 yes
Offset=0,0                                      ; 两个整数 , 整体的偏移坐标 , 默认值是 0,0 , 单位 : 像素
Offset.Characters=0,0                           ; 两个整数 , 【字符】的偏移坐标 , 默认值是 0,0 , 单位 : 像素
Offset.Characters.Background=0,0                ; 两个整数 , 【字符】的背景的额外偏移坐标 , 在【字符】的基础上进行偏移 , 默认值是 0,0 , 单位 : 像素
Offset.Bars=0,0                                 ; 两个整数 , 【血条】的偏移坐标 , 默认值是 0,0 , 单位 : 像素
Offset.Bars.Background=0,0                      ; 两个整数 , 【血条】的背景的额外偏移坐标 , 在【血条】的基础上进行偏移 , 默认值是 0,0 , 单位 : 像素
Spacing.Characters=4                            ; 整数 , 每两个字符间的间距 , 默认值是 4 (参考于提供的基础素材) , 单位 : 像素
                                                ; 在 Spacing=0 即字符间距 0 像素 (全都重叠在一起) , Spacing=-4 即字符间距 -4 像素 (字符反着排列) , Spacing=8 即字符间距 8 像素
Spacing.Brackets=0,0                            ; 两个整数 , 【括号字符】前后的额外间距 , 默认值是 0,0 , 单位 : 像素
                                                ; 对于处于前面的【括号字符】 , 第 1 个数字是前面的额外间距 , 第 2 个是后面的 , 对于处于后面的【括号字符】则相反
Spacing.Separators=0,0                          ; 两个整数 , 【连接字符】前后的额外间距 , 默认值是 0,0 , 单位 : 像素
Spacing.Bars=0                                  ; 整数 , 【血条】与【字符】的距离 , 水平方向还是垂直方向取决于 DirectionType , 默认值是 0 , 单位 : 像素
Spacing.BarPips=2                               ; 整数 , 【血条】中每个格子的间距 , 0 = 重叠在一起 , 负数 = 从左往右掉血 , 默认值是 2 (参考于提供的基础素材) , 单位 : 像素

; 面积设置
; 图形的面积不由素材的实际大小控制 , 而是由这些面积属性控制
; 面积不会限制【数值】的实际显示情况 , 即【数值】是可以超出面积显示的
; 对于 Hexagon 和 Hexagon2 显示类型 , 高度是不计入倾斜结果的
Size=0,0                                        ; 两个整数 , 宽度和高度 ,  负数或 0 = 使用【主体】提供的数据 , 默认值是 0,0 , 单位 : 像素/格 (对应侧的边长)
                                                ; 此为对齐的基准 , 进行对齐时会以 Size 为空间进行对齐
Size.Characters=0,9                             ; 两个整数 , 宽度和高度 , 用于确定【字符】的空间 , 小于 0 按 0 算 , 默认值是 0,9 (参考于提供的基础素材) , 单位 : 像素
                                                ; 【字符】的实际宽度由实际输出的字符宽度和这里的宽度的较大的值决定 , 为了避免字符超出范围 , 宽度应该填写适当的值
Size.Bars=0,0                                   ; 两个整数 , 宽度和高度 , 用于确定【血条】的空间 , 0 = 使用【主体】提供的数据 , 小于 0 按 0 算 , 默认值是 0,0 , 单位 : 像素
```

参考数据：  
游戏内的一个地板格子大小是 60 * 30 像素（水平 * 垂直）。

### 注意

* 请勿在模式或地图的 ini 中修改此类型的属性。

* 不要使用太多的独立色盘，够用就行了。

* 【当前值】、【最大值】、【最小值】、【增加值】只绘制整数部分（百分比除外），到底显示哪个数值由【主体】规定（可能存在不提供此数值的情况）。  
且出于优化的考量，数值长度不可以超过 15 位，且总共不能超过 33 位（含符号）。

* 出于优化的考量，当单位距离屏幕区域过远时，会暂停显示数值（目前是 `240` 像素）。



## 素材规格

提供了一套基础素材，请见 `相关素材` 文件夹。

【字符】的单个素材需要 25 帧，1 ~ 10 帧分别是数字字符 `0123456789`，11 ~ 25 帧分别为符号字符 `.+-*/= _%#$[]<>`（`=` 后面是 `空格`）。  
【血条】的单个素材需要 9 帧，分别是 `满格子的左端、中间、右端`，`空格子的左端、中间、右端` 和 `缓冲残影格子的左端、中间、右端`。  
背景的素材均只使用第 1 帧的图像。