# 标记效果-广播与监听

## 广播 <主动>

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
Effect.Type=Broadcast
```

注册广播频道并在其中发布广播更新。  
单位死亡、标记进入结束状态或标记被移除时会清除掉这个标记带来的广播强度。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【广播强度】|广播的强度，默认值是 `0`，单位：点。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 效果种类相关属性
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Delay=0                                  ; 整数 , 每隔这么多帧发布一次广播更新 , 小于 0 按 0 算 , 但是每一帧最多发布一次广播更新 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持作为监听者。

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 广播与监听相关属性
Broadcast=no                                    ; yes/no , 开启广播能力 , 默认值是 no
Broadcast.Channels=0                            ; 整数列表 , 广播的频道 , 写好几个频道就在好几个频道进行广播 , 取值范围 : 0 ~ 10000 , 默认值是 0
Broadcast.Owner=Self                            ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Self (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 在这些作战方更新广播
Broadcast.Fresh=yes                             ; yes/no , 可以控制是否发布广播更新 , yes = 发布广播更新 , no = 仅同步广播强度 , 不发布广播更新 , 默认值是 yes
```



## 空白监听 <主动，监听>

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
Effect.Type=ListenerBlank
```

监听指定的广播频道，从而什么都不做。

### 注意

* 如果你给此效果种类设置主动监听，则它相当于无任何效果。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【广播更新后执行操作的概率】|-1 = 0%，-0.2 = 20%，0 = 100%，小于 -1 按 -1 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【触发被动监听时播放的动画】 , 不写就不显示动画
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持作为广播源。

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 广播与监听相关属性
Listener=no                                     ; yes/no , 开启监听能力 , 默认值是 no
Listener.Channels=0                             ; 整数列表 , 监听的频道 , 写好几个频道就同时监听这几个频道 , 取值范围 : 0 ~ 10000 , 默认值是 0
Listener.Owner=Self                             ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Self (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 监听这些作战方的广播
Listener.Range=0                                ; 整数 , 需要广播源在这个范围才可以触发监听 , 0 = 不限制 , 默认值是 0 , 单位 : 格子 (开启会比较费性能)
Listener.ActiveMode=yes                         ; yes/no , yes = 主动监听模式 , no = 被动监听模式 , 默认值是 yes (通常来说【被动监听模式】会更费性能 , 请按需选择)
```



## 医院监听 <主动，监听>

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
Effect.Type=ListenerHospital
```

监听指定的广播频道，从而恢复生命值。

### 注意

* 不小心把生命值扣空了的话，单位会凉凉的（死亡伤害可以被免疫）。

* 出于优化的考量，如果处于主动监听模式，则会把所有频道的广播强度合并处理。

* 恢复量可以被拥有【自身处理阶段】的标记处理。

### 效果强度值转换：4 项参数

|参数|说明|
|:-:|:-|
|【广播强度转化率】|广播强度转化为生命值的比例，0 = 0%，1 = 100%，负数效果翻转，默认值是 `0`。|
|【恢复上限】|0 ~ 1 = 恢复至最大生命值百分比，大于 1 = 恢复至指定数值，负数或 0 = 不限制，默认值是 `0`。|
|【恢复下限】|0 ~ 1 = 恢复至最大生命值百分比，大于 1 = 恢复至指定数值，负数或 0 = 不限制，默认值是 `0`。|
|【广播更新后执行操作的概率】|主动监听模式下这是主动执行操作的概率，-1 = 0%，-0.2 = 20%，0 = 100%，小于 -1 按 -1 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【触发被动监听时播放的动画】【恢复生命值时播放的动画】 , 不写就不显示动画
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Counts=-1                                ; 整数 , 恢复生命值的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧恢复一次 , 小于 0 按 0 算 , 但是每一帧最多恢复一次 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持作为广播源。

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 广播与监听相关属性
Listener=no                                     ; yes/no , 开启监听能力 , 默认值是 no
Listener.Channels=0                             ; 整数列表 , 监听的频道 , 写好几个频道就同时监听这几个频道 , 取值范围 : 0 ~ 10000 , 默认值是 0
Listener.Owner=Self                             ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Self (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 监听这些作战方的广播
Listener.Range=0                                ; 整数 , 需要广播源在这个范围才可以触发监听 , 0 = 不限制 , 默认值是 0 , 单位 : 格子 (开启会比较费性能)
Listener.ActiveMode=yes                         ; yes/no , yes = 主动监听模式 , no = 被动监听模式 , 默认值是 yes (通常来说【被动监听模式】会更费性能 , 请按需选择)
```



## 弹头监听 <主动，监听>

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
Effect.Type=ListenerWarhead
```

监听指定的广播频道，从而在单位身上引爆弹头。

### 注意

* 出于优化的考量，如果处于主动监听模式，则会把所有频道的广播强度合并处理。

### 效果强度值转换：2 项参数

|参数|说明|
|:-:|:-|
|【广播强度转化率】|广播强度转化为弹头伤害的比例，0 = 0%，1 = 100%，负数效果翻转，默认值是 `0`。|
|【广播更新后执行操作的概率】|主动监听模式下这是主动执行操作的概率，-1 = 0%，-0.2 = 20%，0 = 100%，小于 -1 按 -1 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【触发被动监听时播放的动画】【引爆弹头时播放的动画】 , 不写就不显示动画
Effect.Warheads=                                ; 弹头列表 , 没有弹头直接进入结束状态
Effect.Healths=-1                               ; 浮点数 , 单位的【生命值下限】 , 当单位当前生命值 <= 【生命值下限】时, 弹头才会引爆 (仍会按照 Delay 来引爆) , 0.2 = 20% 的生命值 , 负数 = 条件不生效 , 默认值是 -1
Effect.Counts=-1                                ; 整数 , 引爆次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Amounts=-1                               ; 整数 , 每次引爆的弹头数量 , 负数 = 全炸一遍 , 0 = 炸不出来 , 默认值是 -1 , 单位 : 个
Effect.Delay=0                                  ; 整数 , 每隔这么多帧炸一次 , 小于 0 按 0 算 , 但是每一帧最多炸一次 , 默认值是 0 , 单位 : 帧
Effect.Random=no                                ; yes/no , 不全部引爆时 , 是否随机选择弹头 , 不随机则从第一个一直爆到最后一个 , 然后再回到第一个 (只引爆一次时就永远是第一个弹头) , 默认值是 no
Effect.Self=yes                                 ; yes/no , yes = 引爆的弹头是标记所属单位的阵营 , no = 引爆的弹头是挂载标记的单位的阵营 (需要单位存活 , 否则炸不出来) , 默认值是 yes
                                                ; 如果阵营不是正常的状态 (比如已经被击败) , 则标记会立刻进入结束状态
Effect.Modes=0                                  ; 整数 , 【不符合生命值时是否消耗次数的模式】【伤害模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【不符合生命值时是否消耗次数的模式】
                                                ; 0 = 不消耗次数
                                                ; 1 = 消耗次数
                                                ; 【伤害模式】
                                                ; 0 = 正常引爆弹头
                                                ; 1 = 不引爆弹头直接传递伤害 , 弹头的 CellSpread 和动画等需要抛射体的效果会无效 , 其他效果理论上正常
```

### 广播与监听相关属性

不支持作为广播源。

位于 `rulesmd.ini`：

```ini
[SomeMarkType]
; 广播与监听相关属性
Listener=no                                     ; yes/no , 开启监听能力 , 默认值是 no
Listener.Channels=0                             ; 整数列表 , 监听的频道 , 写好几个频道就同时监听这几个频道 , 取值范围 : 0 ~ 10000 , 默认值是 0
Listener.Owner=Self                             ; 作战方归属 , 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 Self (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
                                                ; 监听这些作战方的广播
Listener.Range=0                                ; 整数 , 需要广播源在这个范围才可以触发监听 , 0 = 不限制 , 默认值是 0 , 单位 : 格子 (开启会比较费性能)
Listener.ActiveMode=yes                         ; yes/no , yes = 主动监听模式 , no = 被动监听模式 , 默认值是 yes (通常来说【被动监听模式】会更费性能 , 请按需选择)
```