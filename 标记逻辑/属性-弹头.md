# 属性-弹头

默认的运算顺序是先【挂载标记】，然后【激发标记】，然后【结束标记】，然后【转换标记】，然后【移除标记】，最后是【伤害取舍】，【穿透标记】是在各个标记生效前判断的。  
如果弹头对目标单位的伤害为 0（比如 0 伤武器），则【挂载标记】【激发标记】【结束标记】【转换标记】【移除标记】不生效。

### 注意

* 对于大面积的建筑，拥有溅射范围的弹头可能会多次命中同一个建筑，从而导致多次处理下列各项的效果，可以使用 `CellSpread.MaxAffect` 进行限制。



## 通用设置

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
MarkRequireVerses=yes                           ; yes/no , 用于确定【挂载标记】【激发标记】【结束标记】【转换标记】【移除标记】是否能影响护甲 0% 的单位 , yes = 不能影响 , 默认值是 yes
```



## 挂载标记

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
; 以下这四个列表的元素数量需要相匹配
MarkAdd.Types=                                  ; 标记列表 , 此次攻击会挂载这些标记 , 如果已有指定标记则会延长挂载持续时间 (单纯延长挂载持续时间并不会改变标记的状态)
MarkAdd.Sets=                                   ; 标记参数设置列表 , 对应的标记在挂载时会合并此设置 , 不设置则使用标记的默认值
MarkAdd.Check=                                  ; 判断单位条件 , 条件判断 , 需要满足所有的条件
```

标记来源是攻击单位。

另见 [类型-标记参数设置](/其他新类型/类型-标记参数设置.md#类型-标记参数设置)、[类型-判断单位条件](/其他新类型/类型-判断单位条件.md#类型-判断单位条件)。



## 激发标记

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
; 以下这两个列表的元素数量需要相匹配
MarkActive.Types=                               ; 标记列表 , 此次攻击会激发这些标记
MarkActive.Sets=                                ; 标记参数设置列表 , 对应的标记在激发时会合并此设置 , 不设置则无法获得效果强度值 (什么都不做)
MarkActive.Check=                               ; 判断单位条件 , 条件判断 , 需要满足所有的条件
```

另见 [类型-标记参数设置](/其他新类型/类型-标记参数设置.md#类型-标记参数设置)、[类型-判断单位条件](/其他新类型/类型-判断单位条件.md#类型-判断单位条件)。



## 结束标记

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
MarkAfter.Types=                                ; 标记列表 , 此次攻击会结束这些标记 (提前结束激发并尝试进入结束状态 , 挂载状态的标记也会被结束)
MarkAfter.Check=                                ; 判断单位条件 , 条件判断 , 需要满足所有的条件
```

另见 [类型-判断单位条件](/其他新类型/类型-判断单位条件.md#类型-判断单位条件)。



## 转换标记

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
; 以下这六个列表的元素数量需要相匹配
MarkChange.OldTypes=                            ; 标记列表
MarkChange.NewTypes=                            ; 标记列表 , 相同的标记类型无法转换
MarkChange.Sets=                                ; 标记参数设置列表 , 转换后的标记在挂载时会合并此设置
                                                ; Duration = 0 则继承转换前标记的挂载持续时间 , Power = 0 则继承转换前标记的效果强度值 (不设置则强制继承)
MarkChange.Durations=0                          ; 整数列表 , 继承的挂载持续时间会增加此值 , 负数倒扣挂载持续时间 , 使用标记的默认值时此项无效 , 默认值是 0 , 单位 : 帧
MarkChange.Powers=0                             ; 浮点数列表 , 继承的效果强度值会额外增加此值 , 负数倒扣效果强度值 , 默认值是 0 , 单位 : 点
MarkChange.Check=                               ; 判断单位条件 , 条件判断 , 需要满足所有的条件
```

如果单位挂载了 `MarkChange.OldTypes` 中的标记，则它会被移除，并添加 `MarkChange.NewTypes` 中对应位置的标记。  
原标记的挂载持续时间、状态、效果强度值均会被继承（生效状态会被转换为激发状态），继承的各项数据仍会受到单位的抗性影响。  
虽然会继承标记的状态，但是是否可以成功进入状态仍然受到标记本身的属性限制。  
栗如当新标记的 `Active.Before` 不为 `0` 时就无法直接进入激发状态，因为在新的标记中 `Active.Before` 会重新计时。

另见 [类型-标记参数设置](/其他新类型/类型-标记参数设置.md#类型-标记参数设置)、[类型-判断单位条件](/其他新类型/类型-判断单位条件.md#类型-判断单位条件)。



## 移除标记

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
MarkRemove.Types=                               ; 标记列表 , 此次攻击会移除这些标记
MarkRemove.Check=                               ; 判断单位条件 , 条件判断 , 需要满足所有的条件
```

另见 [类型-判断单位条件](/其他新类型/类型-判断单位条件.md#类型-判断单位条件)。



## 伤害取舍

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
MarkDamage.AcceptTypes=                         ; 标记列表 , 只能伤害拥有此标记的单位 , 仅限于常规伤害 (无法伤害不等于无法瞄准) , 不写或留空表示允许任意标记
MarkDamage.ExceptTypes=                         ; 标记列表 , 只能伤害未拥有此标记的单位 , 仅限于常规伤害 (无法伤害不等于无法瞄准) , 如果两个列表都设置了就必须同时满足两个列表才能造成伤害

; 以下这两个列表的元素数量需要相匹配
MarkDamage.Types=                               ; 标记列表 , 拥有这些标记的单位会额外处理伤害 , 仅限于常规伤害
MarkDamage.Multipliers=1                        ; 浮点数列表 , 每个标记带来的伤害倍率 , 多个标记彼此相乘 , 0 ~ 1 表示伤害降低 , 大于 1 表示伤害提升 , 不能小于 0 , 默认值是 1
```



## 穿透标记

位于 `rulesmd.ini`：

```ini
[SomeWarheadType]
MarkPenetrate.AttackTypes=                      ; 标记列表 , 此弹头无视这些标记在【攻击处理阶段】的效果 (影响攻击者的标记) , 写 <All> 表示对所有标记生效 (不区分大小写) , 不写或留空表示不应用此效果 , 默认值是 空
MarkPenetrate.DefendTypes=                      ; 标记列表 , 此弹头无视这些标记在【防御处理阶段】的效果 (影响被击者的标记) , 写 <All> 表示对所有标记生效 (不区分大小写) , 不写或留空表示不应用此效果 , 默认值是 空
MarkPenetrate.DamagedTypes=                     ; 标记列表 , 此弹头无视这些标记在【受伤处理阶段】的效果 (影响被击者的标记) , 写 <All> 表示对所有标记生效 (不区分大小写) , 不写或留空表示不应用此效果 , 默认值是 空
MarkPenetrate.HealedTypes=                      ; 标记列表 , 此弹头无视这些标记在【治疗处理阶段】的效果 (影响被击者的标记) , 写 <All> 表示对所有标记生效 (不区分大小写) , 不写或留空表示不应用此效果 , 默认值是 空
```