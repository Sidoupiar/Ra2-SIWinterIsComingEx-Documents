# 待办事项 v0.0.9

## 【已封闭】

#### 改进性功能仍然会被添加，不再接受新的独立功能。

## 以下功能暂时无法添加，之后有了解决方案时再添加

* 触发关联 Buff。  
被挂上这种 Buff 的单位可以被触发行为激活，激活后这些单位会成为那个触发的关联对象。

* 限制矿车只能采某一或几种矿物。

## 已添加（修改）完毕的功能

### 全局

* 重构通用块记录。  
这是一个内部逻辑的改变，并不体现在 ini 中。  
（#93）

* 单位完全支持类型转换。  
这是一个内部逻辑的改变，并不体现在 ini 中。  
（#90）

* 改进单位类型和所属作战方的写法。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)（各类 Buff 效果不再列举） 和 [类型-判断单位条件](/Buff/子类型-判断单位条件.md#子类型-判断单位条件)。  
（#93）

### 触发与 AI 脚本动作

* 重写数据包结构。  
详见 [类型-数据包](/触发与AI脚本动作/类型-数据包.md#类型-数据包)、[类型-单位数据集合](/触发与AI脚本动作/子类型-单位数据集合.md#子类型-单位数据集合)、[类型-超武数据集合](/触发与AI脚本动作/子类型-超武数据集合.md#子类型-超武数据集合)、[类型-数值数据集合](/触发与AI脚本动作/子类型-数值数据集合.md#子类型-数值数据集合)、[类型-脚本数据集合](/触发与AI脚本动作/子类型-脚本数据集合.md#子类型-脚本数据集合)、[类型-偏移数据集合](/触发与AI脚本动作/子类型-偏移数据集合.md#子类型-偏移数据集合)、[类型-计时数据集合](/触发与AI脚本动作/子类型-计时数据集合.md#子类型-计时数据集合)、[类型-动画数据集合](/触发与AI脚本动作/子类型-动画数据集合.md#子类型-动画数据集合)、[类型-输出文本设置](/触发与AI脚本动作/子类型-输出文本设置.md#子类型-输出文本设置) 和 [类型-Buff 参数设置](/Buff/子类型-Buff参数设置.md#子类型-Buff-参数设置)。  
（#94 #95 #96 #97 #98 #99 #108 #109）

* 由于底层逻辑和数据包结构的重构，原来的 AI 脚本动作编号停用（即这些 AI 脚本动作编号不再有效），在数据包结构重构完成后使用新的编号。  
这些脚本会在之后的数据包重做中变更为新的 AI 脚本动作。  
详见 [迁移说明](/迁移说明.md#开发版本相关相对于最新的发布版即相对于-008)。  
（#93 #94）

* 重写 AI 脚本动作编号（以及属性含义与关联）。  
详见 [AI脚本动作-杂项](/触发与AI脚本动作/AI脚本动作-1-杂项.md#ai脚本动作-杂项)、[AI脚本动作-操作 Buff](/触发与AI脚本动作/AI脚本动作-2-操作Buff.md#ai脚本动作-操作-Buff)、[AI脚本动作-判断单位数量](/触发与AI脚本动作/AI脚本动作-4-判断单位数量.md#ai脚本动作-判断单位数量)。  
（#94 #95）

* 作战方局部变量。  
详见 [数据-作战方局部变量](/触发与AI脚本动作/数据-作战方局部变量.md#数据-作战方局部变量)。  
（#93 #109）

* 作战方局部变量相关的触发动作。  
详见 [触发动作-操作作战方局部变量](/触发与AI脚本动作/触发动作-3-操作作战方局部变量.md#触发动作-操作作战方局部变量)。  
（#100 #105 #109）

* 判断指定作战方是否拥有指定类型的单位的触发事件。  
详见 [触发事件-作战方拥有指定类型的单位](/触发与AI脚本动作/触发事件-1-杂项.md#50000--50001-作战方拥有指定类型的单位)。  
（#105）

* 判断数值的触发事件。  
详见 [触发事件-判断数值](/触发与AI脚本动作/触发事件-5-判断数值.md#触发事件-判断数值)。  
（#100 #101）

* 作战方局部变量相关的 AI 脚本动作。  
详见 [AI脚本动作-操作作战方局部变量](/触发与AI脚本动作/AI脚本动作-3-操作作战方局部变量.md#ai脚本动作-操作作战方局部变量)。  
（#95 #105）

* 判断单位数量和数值的 AI 脚本动作。  
详见 [AI脚本动作-判断单位数量](/触发与AI脚本动作/AI脚本动作-4-判断单位数量.md#ai脚本动作-判断单位数量) 和 [AI脚本动作-判断数值](/触发与AI脚本动作/AI脚本动作-5-判断数值.md#ai脚本动作-判断数值)。  
（#95）

* `脚本动作最大持续时间` AI 脚本动作（超时自动结束当前 AI 脚本动作并执行下一个 AI 脚本动作）。  
详见 [`脚本动作最大持续时间`](/触发与AI脚本动作/AI脚本动作-1-杂项.md#50001n-脚本动作最大持续时间)。  
（#97）

* `随机投放单位` AI 脚本动作支持播放动画和最大投放范围。  
详见 [`随机投放单位`](/触发与AI脚本动作/AI脚本动作-1-杂项.md#50030n-随机投放单位)。  
（#99 #103 #108）

* `移动至随机坐标` AI 脚本动作。  
详见 [`移动至随机坐标`](/触发与AI脚本动作/AI脚本动作-1-杂项.md#50041n-移动至随机坐标)。  
（#99）

### 驻军逻辑

* 根据驻军人数变换驻军建筑的武器；根据驻军步兵的 `OccupyMode` 变换驻军建筑的武器。  
详见 [多驻军武器可切换的驻军武器](/功能扩展-驻军逻辑.md#多驻军武器可切换的驻军武器)。  
（#86 #87 #88 #89）

### Buff

* 全局块 `[BuffControls]`。  
Buff 的弹头，对于需要使用弹头的 Buff，这里设置 Buff 使用的默认弹头和一些其他的相关设置。  
详见 [属性-全局](/Buff/属性-全局.md#属性-全局)。  
（#93 #98 #103）

* 单位可以挂载的 Buff 数量限制。  
详见 [Buff 数量限制](/Buff/属性-单位.md#Buff-数量限制)。  
（#126）

* 限定国家的单位出厂 Buff。  
详见 [出厂 Buff](/Buff/属性-国家.md#出厂-Buff)。  
（#122）

* Buff 免注册。（啊这）  
这是一个内部逻辑的改变，并不体现在 ini 中。  
（#100）

* 伤害来源判定，并可以作为 Buff 生效的条件之一。  
详见 [类型-判断单位条件](/Buff/子类型-判断单位条件.md#子类型-判断单位条件)。  
（#85 #97）

* 合并各种影响挂载、激发 Buff 等效果的参数属性和判断属性（属于 Buff 效果的部分除外）。  
详见 [属性-弹头](/Buff/属性-弹头.md#属性-弹头) 和 [类型-判断单位条件](/Buff/子类型-判断单位条件.md#子类型-判断单位条件)。  
（#85 #105）

* 合并各种挂载、激发 Buff 等效果类型的初始化参数（属于 Buff 效果的部分除外）。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)、[属性-单位](/Buff/属性-单位.md#属性-单位)、[属性-弹头](/Buff/属性-弹头.md#属性-弹头) 和 [类型-Buff 参数设置](/Buff/子类型-Buff参数设置.md#子类型-Buff-参数设置)。  
（#91 #92 #119 #127）

* 武器增加排除和不排除 Buff 来源的瞄准限制的功能，支持副武器推算。  
详见 [瞄准 Buff](/Buff/属性-武器.md#瞄准Buff)。  
（#112 #123 #125 #131）

* `间歇 Buff` 增加首次触发的延迟。  
详见 [`间歇 Buff`](/Buff/属性-单位.md#间歇Buff)。  
（#106）

* 增加进入载具、离开载具时对载具、载员挂载 Buff 的功能。  
详见 [载员 Buff](/Buff/属性-单位.md#载员Buff)。  
（#99 #130）

* 增加进入建筑、离开建筑时对建筑、驻军挂载 Buff 的功能。  
详见 [驻军 Buff](/Buff/属性-单位.md#驻军Buff)。  
（#99 #130）

* 增加建筑被渗透时给建筑挂载 Buff 的功能。  
详见 [自定义间谍渗透](/Buff/属性-单位.md#自定义间谍渗透)。  
（#136）

* Buff 支持单位断电、被 EMP、被静默等时是否保留 Buff 和效果是否生效。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#127）

* Buff 支持 AI 的难度区分 `AllowAIDifficulty`。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#93）

* Buff 支持战役模式和其他模式（遭遇战）区分 `AllowGameMode`。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#118）

* Buff 的效果强度值生效区间 `Power.Maxs.Effect` 和 `Power.Mins.Effect`。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#97）

* Buff 的生命值。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)、[属性-单位](/Buff/属性-单位.md#Buff抗性) 和 [类型-Buff 参数设置](/Buff/子类型-Buff参数设置.md#完整结构)。  
（#103）

* Buff 的重复挂载和自动激发检测。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构) 和 [类型-判断单位条件](/Buff/子类型-判断单位条件.md#完整结构)。  
（#103）

* Buff 所属作战方，增加不论单位所属的作战方如何变化始终为挂载瞬间的作战方的功能。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#108）

* Buff 增加偏移坐标运动轨迹功能。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构) 和 [类型-坐标运动轨迹](/Buff/子类型-坐标运动轨迹.md#完整结构)。  
（#113 #114 #115 #116 #117）

* Buff 增加数值显示功能。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)、[类型-数值显示设置](/数值显示/类型-数值显示设置.md#完整结构) 和 [类型-按钮显示设置](/数值显示/类型-按钮显示设置.md#完整结构)。  
（#117 #137 #138 #139）

* Buff 中 `切换至新的 Buff` 功能可以写多个 Buff（和相应的 `Buff 参数设置`）。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#93）

* 所有带弹头的造成伤害类的 Buff 增加直接扣血的功能。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#118）

* Buff 增加了额外代码来支持特殊的临时效果。  
详见 [类型-Buff](/Buff/类型-Buff.md#完整结构)。  
（#138）

* Buff 增加了坐标运动轨迹的功能。  
详见 [类型-坐标运动轨迹](/Buff/子类型-坐标运动轨迹.md#完整结构)。  
（#113 #114 #115 #116 #117）

* ~~`引爆弹头` Buff 增加了直接伤害的模式。~~  
~~详见 [`引爆弹头`](/Buff/Buff效果-1-杂项.md#引爆弹头-主动)。~~  
然后被移除了，效果合并至 `DamageProcessType`。  
（#104 #118）

* `发射武器` Buff 增加了限制单位种类、坐标偏移的功能。  
详见 [`发射武器`](/Buff/Buff效果-11-Buff武器.md#发射武器-主动)。  
（#105 #112 #113 #114 #115 #116 #117 #123 #125 #142）

* `Buff 激发` 和 `Buff 强度` Buff 的参数进行了调整，使得不设置 `Effect.AcceptBuffs` 属性时参数也有效果。  
详见 [`Buff 激发`](/Buff/Buff效果-2-Buff处理.md#Buff激发-主动) 和 [`Buff 强度`](/Buff/Buff效果-2-Buff处理.md#Buff强度-主动)。  
（#98）

* `静默状态` Buff 生效期间，AI 的生产建筑会停止生产。  
详见 [`静默状态`](/Buff/Buff效果-1-杂项.md#静默状态-主动)。  
（#93）

* `嘲讽状态` Buff 增加单位移动模式，单位类型限制以及相关的模式。  
详见 [`嘲讽状态`](/Buff/Buff效果-1-杂项.md#嘲讽状态-主动)。  
（#97 #98 #103）

* `生命恢复` Buff 设置上下限制。  
详见 [`生命恢复`](/Buff/Buff效果-4-生命值.md#生命恢复-主动)。  
（#97）

* `伤害承担` Buff 增加伤害穿透比例、承担概率和数值显示。  
详见 [`伤害承担`](/Buff/Buff效果-3-受伤效果.md#伤害承担-主动自身受伤治疗)。  
（#97 #117）

* `伤害格挡` Buff 增加数值显示。  
详见 [`伤害格挡`](/Buff/Buff效果-3-受伤效果.md#伤害格挡-主动受伤)。  
（#117）

* `伤害反射` Buff 增加反射给自己、触发概率的功能。  
详见 [`伤害反射`](/Buff/Buff效果-3-受伤效果.md#伤害反射-受伤治疗)。  
（#97 #105）

* `伤害连锁` Buff 移除了直接伤害的模式，效果合并至 `DamageProcessType`。  
详见 [`伤害连锁`](/Buff/Buff效果-3-受伤效果.md#伤害连锁-受伤治疗)。  
（#118）

* `伤害免死` Buff 增加【Buff 和弹头的触发时间间隔】和【血量控制模式】。  
详见 [`伤害免死`](/Buff/Buff效果-3-受伤效果.md#伤害免死-受伤)。  
（#101 #126）

* 添加 Buff 的效果动画：  
[`投放单位`](/Buff/Buff效果-1-杂项.md#投放单位-主动) Buff，增加【投放时播放的动画】；  
[`死亡时投放单位`](/Buff/Buff效果-1-杂项.md#死亡时投放单位-亡语) Buff，增加【投放时播放的动画】；  
[`原地去世`](/Buff/Buff效果-1-杂项.md#原地去世-主动) Buff，增加【目标死亡成功时播放的动画】【目标死亡失败时播放的动画】；  
[`连锁死亡`](/Buff/Buff效果-1-杂项.md#连锁死亡-亡语) Buff，增加【目标死亡成功时播放的动画】【目标死亡失败时播放的动画】；  
[`建筑变卖`](/Buff/Buff效果-1-杂项.md#建筑变卖-主动) Buff，增加【变卖成功时播放的动画】【变卖失败时播放的动画】；  
[`静默状态`](/Buff/Buff效果-1-杂项.md#静默状态-主动) Buff，增加【处于静默状态的单位身上循环播放的动画】；  
[`嘲讽状态`](/Buff/Buff效果-1-杂项.md#嘲讽状态-主动) Buff，增加【触发时在自己身上播放的动画】【触发时在受影响单位身上播放的动画】；  
[`加成移动`](/Buff/Buff效果-1-杂项.md#加成移动-主动) Buff，增加【增加数值时播放的动画】；  
[`加成护甲`](/Buff/Buff效果-1-杂项.md#加成护甲-主动) Buff，增加【增加数值时播放的动画】；  
[`加成火力`](/Buff/Buff效果-1-杂项.md#加成火力-主动) Buff，增加【增加数值时播放的动画】；  
[`加成射速`](/Buff/Buff效果-1-杂项.md#加成射速-主动) Buff，增加【增加数值时播放的动画】；  
[`Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#Buff-挂载-主动) Buff，增加【生效时在自己身上播放的动画】【生效时在受影响单位身上播放的动画】；  
[`Buff 激发`](/Buff/Buff效果-2-Buff处理.md#Buff-激发-主动) Buff，增加【生效时在自己身上播放的动画】【生效时在受影响单位身上播放的动画】；  
[`Buff 结束`](/Buff/Buff效果-2-Buff处理.md#Buff-结束-主动) Buff，增加【生效时在自己身上播放的动画】【生效时在受影响单位身上播放的动画】；  
[`Buff 移除`](/Buff/Buff效果-2-Buff处理.md#Buff-移除-主动) Buff，增加【生效时在自己身上播放的动画】【生效时在受影响单位身上播放的动画】；  
[`Buff 强度`](/Buff/Buff效果-2-Buff处理.md#Buff-强度-主动) Buff，增加【生效时在自己身上播放的动画】【生效时在受影响单位身上播放的动画】；  
[`Buff 转换`](/Buff/Buff效果-2-Buff处理.md#Buff-转换-主动) Buff，增加【生效时在自己身上播放的动画】【生效时在受影响单位身上播放的动画】；  
[`攻击 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#攻击-Buff-挂载-攻击) Buff，增加【生效时播放的动画】；  
[`伤害承担`](/Buff/Buff效果-3-受伤效果.md#伤害承担-主动自身受伤治疗) Buff，增加【持有可承担伤害量时循环播放的动画】【受击但未破碎时播放的动画】【护盾破碎的动画】；  
[`伤害格挡`](/Buff/Buff效果-3-受伤效果.md#伤害格挡-主动受伤) Buff，增加【持有格挡层数时循环播放的动画】；  
[`伤害分摊`](/Buff/Buff效果-3-受伤效果.md#伤害分摊-受伤治疗) Buff，增加【成功分摊时播放的动画】【被攻击时播放的动画】；  
[`伤害免疫`](/Buff/Buff效果-3-受伤效果.md#伤害免疫-自身受伤治疗) Buff，增加【持有时循环播放的动画】【受击时播放的动画】；  
[`伤害限制`](/Buff/Buff效果-3-受伤效果.md#伤害限制-受伤) Buff，增加【限制上限伤害时播放的动画】【限制下限伤害时播放的动画】；  
[`伤害隔离`](/Buff/Buff效果-3-受伤效果.md#伤害隔离-受伤) Buff，增加【隔离上限伤害时播放的动画】【隔离下限伤害时播放的动画】；  
[`伤害反射`](/Buff/Buff效果-3-受伤效果.md#伤害反射-受伤治疗) Buff，增加【反射成功时播放的动画】【反射失败时播放的动画】【反射目标身上播放的动画】；  
[`伤害连锁`](/Buff/Buff效果-3-受伤效果.md#伤害连锁-受伤治疗) Buff，增加【在自己身上播放的动画】【在目标身上播放的动画】；  
[`伤害即死`](/Buff/Buff效果-3-受伤效果.md#伤害即死-受伤) Buff，增加【目标死亡成功时播放的动画】【目标死亡失败时播放的动画】；  
[`伤害免死`](/Buff/Buff效果-3-受伤效果.md#伤害免死-受伤) Buff，增加【受到致命伤害时播放的动画】；  
[`生命汲取`](/Buff/Buff效果-4-生命值.md#生命汲取-攻击) Buff，增加【在自己身上播放的动画】【在目标身上播放的动画】；  
[`生命锁定`](/Buff/Buff效果-4-生命值.md#生命锁定-主动自身受伤) Buff，增加【首次受到过量伤害后开始循环播放的动画】【受到过量伤害时播放的动画】；  
[`生命恢复`](/Buff/Buff效果-4-生命值.md#生命恢复-主动) Buff，增加【持有时循环播放的动画】【恢复生命值时播放的动画 (仅限有效恢复)】；  
[`生命重置`](/Buff/Buff效果-4-生命值.md#生命重置-主动) Buff，增加【重置生命值时播放的动画】。  
详见 [请看上面的各个 Buff](/待办事项.md)。  
（#100 #105 #118 #140）

* `空效果` 和 `无效果` Buff。  
详见 [`空效果`](/Buff/Buff效果-0-无效果.md#空效果-主动) 和 [`无效果`](/Buff/Buff效果-0-无效果.md#无效果-主动)。  
（#93）

* `生命重置` Buff。  
详见 [`生命重置`](/Buff/Buff效果-4-生命值.md#生命重置-主动)。  
（#97）

* `开始巡猎` Buff。  
详见 [`开始巡猎`](/Buff/Buff效果-1-杂项.md#开始巡猎-主动)。  
（#137）

* `加成属性` Buff（集合）。  
详见 [`加成属性`](/Buff/Buff效果-12-单位属性.md#加成属性-主动)。  
（#96 #103 #104 #105 #109 #110 #112 #122 #142 #143）

* `染色` Buff。  
详见 [`染色`](/Buff/Buff效果-12-单位属性.md#染色-主动)。  
（#143）

* `操作作战方局部变量-主动`、`操作作战方局部变量-死亡` Buff。  
详见 [`操作作战方局部变量-主动`](/Buff/Buff效果-502-操作作战方局部变量.md#操作作战方局部变量-主动-主动) 和 [`操作作战方局部变量-死亡`](/Buff/Buff效果-502-操作作战方局部变量.md#操作作战方局部变量-死亡-亡语)。  
（#101 #105 #109）

* `判断数值-主动`、`判断数值-死亡` Buff。  
详见 [`判断数值-主动`](/Buff/Buff效果-504-判断数值.md#判断数值-主动-主动) 和 [`判断数值-死亡`](/Buff/Buff效果-504-判断数值.md#判断数值-死亡-亡语)。  
（#101）

* `攻击 Buff 激发`、`攻击 Buff 结束`、`攻击 Buff 移除`、`攻击 Buff 强度` 和 `攻击 Buff 转换` Buff。  
详见 [`攻击 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#攻击-Buff-激发-击杀)、[`攻击 Buff 结束`](/Buff/Buff效果-2-Buff处理.md#攻击-Buff-结束-击杀)、[`攻击 Buff 移除`](/Buff/Buff效果-2-Buff处理.md#攻击-Buff-移除-击杀)、[`攻击 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#攻击-Buff-强度-击杀) 和 [`攻击 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#攻击-Buff-转换-攻击)。  
（#137 #140）

* `攻击转化 Buff 挂载`、`攻击转化 Buff 激发`、`攻击转化 Buff 强度` 和 `攻击转化 Buff 转换` Buff。  
详见 [`攻击转化 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#攻击转化-Buff-挂载-攻击)、[`攻击转化 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#攻击转化-Buff-激发-攻击)、[`攻击转化 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#攻击转化-Buff-强度-攻击) 和 [`攻击转化 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#攻击转化-Buff-转换-攻击)。  
（#137 #140）

* `防御 Buff 挂载`、`防御 Buff 激发`、`防御 Buff 结束`、`防御 Buff 移除`、`防御 Buff 强度` 和 `防御 Buff 转换` Buff。  
详见 [`防御 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#防御-Buff-挂载-防御)、[`防御 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#防御-Buff-激发-防御)、[`防御 Buff 结束`](/Buff/Buff效果-2-Buff处理.md#防御-Buff-结束-防御)、[`防御 Buff 移除`](/Buff/Buff效果-2-Buff处理.md#防御-Buff-移除-防御)、[`防御 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#防御-Buff-强度-防御) 和 [`防御 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#防御-Buff-转换-防御)。  
（#137 #140）

* `防御转化 Buff 挂载`、`防御转化 Buff 激发`、`防御转化 Buff 强度` 和 `防御转化 Buff 转换` Buff。  
详见 [`防御转化 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#防御转化-Buff-挂载-防御)、[`防御转化 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#防御转化-Buff-激发-防御)、[`防御转化 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#防御转化-Buff-强度-防御) 和 [`防御转化 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#防御转化-Buff-转换-防御)。  
（#137 #140）

* `受伤 Buff 挂载`、`受伤 Buff 激发`、`受伤 Buff 结束`、`受伤 Buff 移除`、`受伤 Buff 强度` 和 `受伤 Buff 转换` Buff。  
详见 [`受伤 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#受伤-Buff-挂载-受伤治疗)、[`受伤 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#受伤-Buff-激发-受伤治疗)、[`受伤 Buff 结束`](/Buff/Buff效果-2-Buff处理.md#受伤-Buff-结束-受伤治疗)、[`受伤 Buff 移除`](/Buff/Buff效果-2-Buff处理.md#受伤-Buff-移除-受伤治疗)、[`受伤 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#受伤-Buff-强度-受伤治疗) 和 [`受伤 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#受伤-Buff-转换-受伤治疗)。  
（#137 #140）

* `受伤转化 Buff 挂载`、`受伤转化 Buff 激发`、`受伤转化 Buff 强度` 和 `受伤转化 Buff 转换` Buff。  
详见 [`受伤转化 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#受伤转化-Buff-挂载-受伤治疗)、[`受伤转化 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#受伤转化-Buff-激发-受伤治疗)、[`受伤转化 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#受伤转化-Buff-强度-受伤治疗) 和 [`受伤转化 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#受伤转化-Buff-转换-受伤治疗)。  
（#137 #140）

* `击杀 Buff 挂载`、`击杀 Buff 激发`、`击杀 Buff 结束`、`击杀 Buff 移除`、`击杀 Buff 强度` 和 `击杀 Buff 转换` Buff。  
详见 [`击杀 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#击杀-Buff-挂载-击杀)、[`击杀 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#击杀-Buff-激发-击杀)、[`击杀 Buff 结束`](/Buff/Buff效果-2-Buff处理.md#击杀-Buff-结束-击杀)、[`击杀 Buff 移除`](/Buff/Buff效果-2-Buff处理.md#击杀-Buff-移除-击杀)、[`击杀 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#击杀-Buff-强度-击杀) 和 [`击杀 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#击杀-Buff-转换-击杀)。  
（#104 #137 #140）

* `击杀转化 Buff 挂载`、`击杀转化 Buff 激发`、`击杀转化 Buff 强度` 和 `击杀转化 Buff 转换` Buff。  
详见 [`击杀转化 Buff 挂载`](/Buff/Buff效果-2-Buff处理.md#击杀转化-Buff-挂载-击杀)、[`击杀转化 Buff 激发`](/Buff/Buff效果-2-Buff处理.md#击杀转化-Buff-激发-击杀)、[`击杀转化 Buff 强度`](/Buff/Buff效果-2-Buff处理.md#击杀转化-Buff-强度-击杀) 和 [`击杀转化 Buff 转换`](/Buff/Buff效果-2-Buff处理.md#击杀转化-Buff-转换-击杀)。  
（#137 #140）

* `Buff 挂载监听`、`Buff 激发监听`、`Buff 结束监听`、`Buff 移除监听` 和 `Buff 强度监听` Buff。  
详见 [`Buff 挂载监听`](/Buff/Buff效果-2-Buff处理.md#Buff-挂载监听-主动监听)、[`Buff 激发监听`](/Buff/Buff效果-2-Buff处理.md#Buff-激发监听-主动监听)、[`Buff 结束监听`](/Buff/Buff效果-2-Buff处理.md#Buff-结束监听-主动监听)、[`Buff 移除监听`](/Buff/Buff效果-2-Buff处理.md#Buff-移除监听-主动监听) 和 [`Buff 强度监听`](/Buff/Buff效果-2-Buff处理.md#Buff-强度监听-主动监听)。  
（#109）

* `替换武器` Buff。  
详见 [`替换武器`](/Buff/Buff效果-11-Buff武器.md#替换武器-开火)。  
（#105）

* `替换死亡武器` Buff。  
详见 [`替换死亡武器`](/Buff/Buff效果-11-Buff武器.md#替换死亡武器-主动)。  
（#105 #142）

* `除你武器` Buff。  
详见 [`除你武器`](/Buff/Buff效果-11-Buff武器.md#除你武器-主动开火)。  
（#117 #142）

* `自瞄武器` Buff。  
详见 [`自瞄武器`](/Buff/Buff效果-11-Buff武器.md#自瞄武器-主动)。  
（#105 #112 #113 #114 #115 #116 #117 #123 #142）

* `齐射武器` Buff。  
详见 [`齐射武器`](/Buff/Buff效果-11-Buff武器.md#齐射武器-开火)。  
（#109 #112 #113 #114 #115 #116 #117 #123 #142）

* `散射武器` Buff。  
详见 [`散射武器`](/Buff/Buff效果-11-Buff武器.md#散射武器-开火)。  
（#117 #118 #123 #142）

* `溅射武器` Buff。  
详见 [`溅射武器`](/Buff/Buff效果-11-Buff武器.md#溅射武器-防御)。  
（#117 #123 #142）

* `死亡复仇`、`攻击复仇` 和 `受伤复仇` Buff。  
详见 [`死亡复仇`](/Buff/Buff效果-11-Buff武器.md#死亡复仇-受伤亡语)、[`攻击复仇`](/Buff/Buff效果-11-Buff武器.md#攻击复仇-攻击受伤) 和 [`受伤复仇`](/Buff/Buff效果-11-Buff武器.md#受伤复仇-受伤)。  
（#112 #113 #114 #115 #116 #117 #123 #142）

* `死亡殉爆`、`攻击殉爆` 和 `受伤殉爆` Buff。  
详见 [`死亡殉爆`](/Buff/Buff效果-11-Buff武器.md#死亡殉爆-攻击亡语)、[`攻击殉爆`](/Buff/Buff效果-11-Buff武器.md#攻击殉爆-攻击) 和 [`受伤殉爆`](/Buff/Buff效果-11-Buff武器.md#受伤殉爆-攻击受伤)。  
（#113 #114 #115 #116 #117 #123 #142）

* `弹药调整` 和 `弹药检测` Buff。  
详见 [`弹药调整`](/Buff/Buff效果-1-杂项.md#弹药调整-主动) 和 [`弹药检测`](/Buff/Buff效果-1-杂项.md#弹药检测-主动)。  
（#108）

* `广播`、`空白监听` 和 `医院监听` Buff。  
详见 [`广播`](/Buff/Buff效果-6-广播与监听.md#广播-主动)、[`空白监听`](/Buff/Buff效果-6-广播与监听.md#空白监听-主动监听) 和 [`医院监听`](/Buff/Buff效果-6-广播与监听.md#医院监听-主动监听)。  
（#108 #109）

* `弹头监听` Buff。  
详见 [`弹头监听`](/Buff/Buff效果-6-广播与监听.md#弹头监听-主动监听)。  
（#109 #118）

* `经验值` Buff。  
详见 [`经验值`](/Buff/Buff效果-1-杂项.md#经验值-主动)。  
（#104）

* `只有持续时间` Buff。  
详见 [`只有持续时间`](/Buff/Buff效果-0-无效果.md#只有持续时间-主动)。  
（#117）

* `只有可以点击` Buff。  
详见 [`只有可以点击`](/Buff/Buff效果-0-无效果.md#只有可以点击-主动)。  
（#133）

* `只有间歇动画` Buff。
详见 [`只有间歇动画`](/Buff/Buff效果-0-无效果.md#只有间歇动画-主动)。  
（#127）

* `显示作战方局部变量` Buff。  
详见 [`显示作战方局部变量`](/Buff/Buff效果-7-数值显示.md#显示作战方局部变量-主动)。  
（#117）

* `伤害转化广播` Buff。  
详见 [`伤害转化广播`](/Buff/Buff效果-6-广播与监听.md#伤害转化广播-防御)。  
（#122）

* `吸收矿物` Buff。  
详见 [`吸收矿物`](/Buff/Buff效果-1-杂项.md#吸收矿物-主动)。  
（#122 #129）

* `生产矿物` Buff。  
详见 [`生产矿物`](/Buff/Buff效果-1-杂项.md#生产矿物-主动)。  
（#129）

* `载员控制` Buff 集合。  
详见 [`载具填充-主动`](/Buff/Buff效果-10-载员控制.md#载具填充-主动-主动)、[`载具吸纳-主动`](/Buff/Buff效果-10-载员控制.md#载具吸纳-主动-主动)、[`载具释放-主动`](/Buff/Buff效果-10-载员控制.md#载具释放-主动-主动)、[`载具移除-主动`](/Buff/Buff效果-10-载员控制.md#载具移除-主动-主动)、[`载员进入-主动`](/Buff/Buff效果-10-载员控制.md#载员进入-主动-主动)、[`载员脱出-主动`](/Buff/Buff效果-10-载员控制.md#载员脱出-主动-主动)、[`载具填充-攻击`](/Buff/Buff效果-10-载员控制.md#载具填充-攻击-攻击)、[`载具吸纳-攻击`](/Buff/Buff效果-10-载员控制.md#载具吸纳-攻击-攻击)、[`载具释放-攻击`](/Buff/Buff效果-10-载员控制.md#载具释放-攻击-攻击)、[`载具移除-攻击`](/Buff/Buff效果-10-载员控制.md#载具移除-攻击-攻击)、[`载员进入-攻击`](/Buff/Buff效果-10-载员控制.md#载员进入-攻击-攻击)、[`载员脱出-攻击`](/Buff/Buff效果-10-载员控制.md#载员脱出-攻击-攻击)、[`载具填充-防御`](/Buff/Buff效果-10-载员控制.md#载具填充-防御-防御)、[`载具吸纳-防御`](/Buff/Buff效果-10-载员控制.md#载具吸纳-防御-防御)、[`载具释放-防御`](/Buff/Buff效果-10-载员控制.md#载具释放-防御-防御)、[`载具移除-防御`](/Buff/Buff效果-10-载员控制.md#载具移除-防御-防御)、[`载员进入-防御`](/Buff/Buff效果-10-载员控制.md#载员进入-防御-防御) 和 [`载员脱出-防御`](/Buff/Buff效果-10-载员控制.md#载员脱出-防御-防御)。  
（#122 #125 #126）

* `工厂` Buff。  
详见 [`工厂`](/Buff/Buff效果-1-杂项.md#工厂-主动)。  
（#137 #138 #139）

* `技能` Buff。  
详见 [`技能`](/Buff/Buff效果-1-杂项.md#技能-主动)。  
（#138 #139）

* `Buff 额外代码` Buff。  
详见 [`Buff 额外代码`](/Buff/Buff效果-2-Buff处理.md#Buff-额外代码-主动)。  
（#138）

### 经验值系统

* 全局块 `[EXPControls]`。  
用于设置单位升级提升的属性值的默认值。  
详见 [属性-全局](/经验值与升级与军衔图像/属性-全局.md)。  
（#105 #108 #109 #110 #112 #118 #127）

* 重做了经验值逻辑。  
详见 [提供经验值](/经验值与升级与军衔图像/属性-单位.md#提供经验值)、[获取经验值](/经验值与升级与军衔图像/属性-单位.md#获取经验值) 和 [经验值分配](/经验值与升级与军衔图像/属性-单位.md#经验值分配)。  
（#104 #105 #109 #110 #112 #118）

* 重做了升级行为逻辑。
详见 [升级行为](/经验值与升级与军衔图像/属性-单位.md#升级行为)、[类型-单位升级属性](/经验值与升级与军衔图像/类型-单位升级属性.md#类型-单位升级属性)、[类型-单位升级设置](/经验值与升级与军衔图像/类型-单位升级设置.md#类型-单位升级设置) 和 [旧经验系统的升级设置](/经验值与升级与军衔图像/属性-单位.md#旧经验系统的升级设置)。  
（#105 #106 #107 #108 #109 #110 #112 #118 #119 #127 #139）

* 重做了自定义军衔逻辑。  
详见 [自定义军衔](/经验值与升级与军衔图像/属性-单位.md#自定义军衔)、[类型-单位升级设置](/经验值与升级与军衔图像/类型-单位升级设置.md#类型-单位升级设置)、[类型-军衔图像设置](/经验值与升级与军衔图像/类型-军衔图像设置.md#类型-军衔图像设置) 和 [旧经验系统的自定义军衔](/经验值与升级与军衔图像/属性-单位.md#旧经验系统的自定义军衔)。  
（#94 #104 #105 #109 #111 #118）

* 作战方经验池。  
详见 [数据-作战方经验池](/经验值与升级与军衔图像/数据-作战方经验池.md#数据-作战方经验池)。  
（#118）

* 限定国家的单位出厂经验值。  
详见 [出厂经验值](/经验值与升级与军衔图像/属性-国家.md#出厂经验值)。  
（#134）

* 适用于新经验系统的训练所。  
详见 [训练所](/经验值与升级与军衔图像/属性-单位.md#训练所)。  
（#134）

* 适用于新经验系统的自定义间谍渗透。  
详见 [自定义间谍渗透](/经验值与升级与军衔图像/属性-单位.md#自定义间谍渗透)。  
（#135）

* `经验值` 弹头。  
详见 [`经验值`](/经验值与升级与军衔图像/属性-弹头.md#经验值)。  
（#104 #105 #118）

* `经验池` 弹头。  
详见 [`经验池`](/经验值与升级与军衔图像/属性-弹头.md#经验池)。  
（#118）

### 数值显示

* 数值显示设置。  
详见 [数值显示](/数值显示/属性-单位.md#属性-单位)、[类型-数值显示设置](/数值显示/类型-数值显示设置.md#完整结构) 和 [类型-按钮显示设置](/数值显示/类型-按钮显示设置.md#完整结构)。  
（#117 #137 #142）

* 额外显示单位的生命值。  
详见 [数值显示](/数值显示/属性-单位.md#属性-单位) 和 [类型-数值显示设置](/数值显示/类型-数值显示设置.md#完整结构)。  
（#117）

* 隐藏单位血条。  
详见 [杂项](/功能扩展-单位.md#单位---杂项)。  
（#117）

### 元素伤害

* 元素类型。  
详见 [类型-元素类型](/元素伤害/类型-元素类型.md#类型-元素类型)。  
（#129）

* 元素抗性类型。  
详见 [类型-元素抗性类型](/元素伤害/类型-元素抗性类型.md#类型-元素抗性类型)。  
（#129 #130）

* 弹头使用元素攻击。  
详见 [在攻击中附加元素](/元素伤害/属性-弹头.md#在攻击中附加元素)。  
（#129）

* 弹头附加元素抗性和元素免疫。  
详见 [附加元素抗性](/元素伤害/属性-弹头.md#附加元素抗性) 和 [附加元素免疫](/元素伤害/属性-弹头.md#附加元素免疫)。  
（#130）

* 单位的元素抗性和元素免疫。  
详见 [元素抗性](/元素伤害/属性-单位.md#元素抗性) 和 [元素免疫](/元素伤害/属性-单位.md#元素免疫)。  
（#129）

### 杂项

* 判断单位条件增加特定 Buff 的条件。  
详见 [类型-判断单位条件](/Buff/子类型-判断单位条件.md#完整结构)。  
（#117）

* `小队投放` 超武增加对建筑的支持。  
详见 [`小队投放`](/功能扩展-超武.md#超武---小队投放)。  
（#105）

* `真·多段电弧` 武器特效。  
详见 [`真·多段电弧`](/功能扩展-武器.md#武器---真多段电弧)。  
（#101 #102）

* `作战方空闲单位立刻执行脚本` 弹头和 `被影响的单位立刻执行脚本` 弹头增加是否无视单位的可重组属性的功能。  
详见 [`作战方空闲单位立刻执行脚本`](/功能扩展-弹头.md#弹头---作战方空闲单位立刻执行脚本) 和 [`被影响的单位立刻执行脚本`](/功能扩展-弹头.md#弹头---被影响的单位立刻执行脚本)。  
（#128）

* `真实伤害` 弹头。  
详见 [`真实伤害`](/功能扩展-弹头.md#弹头---真实伤害)。  
（#101）

* `伤害归零` 弹头。  
详见 [`伤害归零`](/功能扩展-弹头.md#弹头---伤害归零)。  
（#117）

* `最终归零` 弹头。  
详见 [`最终归零`](/功能扩展-弹头.md#弹头---最终归零)。  
（#101）

* `不致死` 弹头。  
详见 [`不致死`](/功能扩展-弹头.md#弹头---不致死)。  
（#117）

* `单位转换` 弹头。  
详见 [`单位转换`](/功能扩展-弹头.md#弹头---单位转换)。  
（#105 #106 #107 #109 #117）

* `变更所属作战方` 弹头。  
详见 [`变更所属作战方`](/功能扩展-弹头.md#弹头---变更所属作战方)。  
（#121）

* `穿透铁幕` 弹头。  
详见 [`穿透铁幕`](/功能扩展-弹头.md#弹头---穿透铁幕)。  
（#121）

* `传送` 弹头。  
详见 [`传送`](/功能扩展-弹头.md#弹头---传送)。  
（#133 #134）

* 单位的微观生产速度。  
详见 [微观生产速度](/功能扩展-单位.md#单位---微观生产速度)。  
（#140）

* `免疫单位转换` 的单位能力。  
详见 [`免疫单位转换`](/功能扩展-单位.md#单位---免疫单位转换)。  
（#105 #107）

* `免疫变更所属作战方` 的单位能力。  
详见 [`免疫变更所属作战方`](/功能扩展-单位.md#单位---免疫变更所属作战方)。  
（#121）

* `免疫传送` 的单位能力。  
详见 [`免疫传送`](/功能扩展-单位.md#单位---免疫传送)。  
（#133）

* 导弹自动更换目标。  
详见 [导弹自动更换目标](/功能扩展-单位.md#单位---导弹自动更换目标)。  
（#112）

* 特定移动类型的移动速度上限  
详见 [特定移动类型的移动速度上限](/功能扩展-单位.md#单位---特定移动类型的移动速度上限)。  
（#112）

* Arcing 类抛射体独立的速度和重力。  
详见 [速度和重力](/功能扩展-抛射体.md#抛射体---速度和重力)。  
（#115 #117 #123 #125）

* 色盘的特殊设置。  
详见 [色盘的特殊设置](/功能扩展-杂项.md#色盘的特殊设置)。  
（#109）

* 现在驻军可以使用心控武器了。  
详见 [其他改进](/功能扩展-驻军逻辑.md#其他改进)。  
（#129）

* 增加了一些空白快捷键。  
详见 [空白快捷键](/功能扩展-空白快捷键.md)。  
（#138 #139）

## 想来想去添不上去的功能

### Buff

* Buff 的几个效果强度值判断，用 `-2147483648` 表示不判断。  
数据精度不够，暂时搞不定（而且这个数值也太怪了）。

* 记录单位类型 Buff。  
无软用。

* 弹药限制 Buff。  
当弹药超过 A 或低于 B 时均会禁用指定的武器（会尝试切换为另一个可使用的武器攻击）。  
以目前的眼光看，实现它的代价有点大，而且在功能上并非不可替代。

* 逆分摊 Buff。  
此 Buff 已被伤害转化广播 Buff 替代。

* 扩散连锁 Buff。  
此 Buff 已被 Buff 挂载监听 Buff 替代。

* 扩散弹头（抛射体）Buff。  
此 Buff 已被弹头监听 Buff 替代。

* 揭示黑幕 Buff。  
因为可以跳超武，而且这个本来也没啥用。

### 杂项

* 军团效应。  
性能堪忧，而且可以通过 Buff 简单近似模拟。

* `单位转换` 弹头的持续时间，时间结束变回去。  
使用各种 Buff 可以实现绝大多数情况的需要。

* `变更所属作战方` 弹头的持续时间，时间结束变回去。  
使用各种 Buff 可以实现绝大多数情况的需要。



# 待办事项 v0.1.0

## 【未开启】

#### 新的独立功能可以列在此处，但是目前并不会把它们添加进去。

## 已准备添加的功能

#### 这里列出已经确定确实可以加上的功能，它们会被陆续添加到平台扩展中。

* 暂无。

## 可能会添加的功能

#### 由于不确定是否可以加得上的功能，以及暂时没有合适的解决方案的功能会列在此处。一旦这些功能获得了合适的解决方案，就会被添加到平台扩展中。

* 暂无。



# 如果你还想要某个功能的话

#### 如果你确实需要这个逻辑，那么可以提出它（请找我私聊而不是在 git 中提出），但是具体能不能加得上就是另一个故事了。

## 以下请求会被拒绝

* 修复其他扩展平台引入的 bug，包括其他扩展平台修了但没完全修好的原版就有的 bug。

* 添加改善 ini 编写的功能（类似于经典的块继承这种的），这类功能请提给 INI 连接器。

* 扩充文件载入范围类的功能（栗如想要支持直接读取名为 `rulesEX.ini` 的文件或者想要支持读取 `.png` 文件什么的）。

* 一看就没什么意义，甚至有些离谱的功能（栗如在游戏里打开一个界面编写 ini 代码）。

* 带有某种破坏性效果的功能（比如故意弹窗恶心别人的流氓行为）。

* 接入第三方系统，这个会有其他层面的问题，因此不做。

* 扩展底层结构，比如支持 8 人以上游戏什么的，这个是真的无能为力。