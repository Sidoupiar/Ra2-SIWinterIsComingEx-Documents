# Buff效果-杂项

## 引爆弹头 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Warhead
```

在单位脚下引爆一排弹头，单位自己射自己，最终伤害是个整数（去尾）。  
进入生效状态立刻引爆一次，最终引爆完毕后立刻进入结束状态。  
`DamageProcessType` 属性有效。

### 注意

* 由于默认是单位自己射自己，所以弹头需要设置 `AllowDamageOnSelf=yes`（或者 `DamageSelf=yes`）才有伤害。

### 效果强度值转换：N 项参数

参数项数与 `Effect.Warheads` 的长度相匹配。  
每一项都是【对应每个弹头的伤害】：  
`0` = 没伤害，负数 = 治疗，默认值是 `0`。

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Warheads=                                ; 弹头列表 , 没有弹头直接进入结束状态
Effect.Healths=-1                               ; 浮点数 , 单位的【生命值下限】 , 当单位当前生命值 <= 【生命值下限】时, 弹头才会引爆 (仍会按照 Delay 来引爆) , 0.2 = 20% 的生命值 , 负数 = 条件不生效 , 默认值是 -1
Effect.Counts=-1                                ; 整数 , 引爆次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Amounts=-1                               ; 整数 , 每次引爆的弹头数量 , 负数 = 全炸一遍 , 0 = 炸不出来 , 默认值是 -1 , 单位 : 个
Effect.Delay=0                                  ; 整数 , 每隔这么多帧炸一次 , 小于 0 按 0 算 , 但是每一帧最多炸一次 , 默认值是 0 , 单位 : 帧
Effect.Random=no                                ; yes/no , 不全部引爆时 , 是否随机选择弹头 , 不随机则从第一个一直爆到最后一个 , 然后再回到第一个 (只引爆一次时就永远是第一个弹头) , 默认值是 no
Effect.Self=yes                                 ; yes/no , yes = 引爆的弹头是 Buff 所属单位的阵营 , no = 引爆的弹头是挂载 Buff 的单位的阵营 (需要单位存活 , 否则炸不出来) , 默认值是 yes
                                                ; 如果阵营不是正常的状态 (比如已经被击败) , 则 益 会立刻进入结束状态
Effect.Modes=0                                  ; 整数 , 【不符合生命值时是否消耗次数的模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【不符合生命值时是否消耗次数的模式】
                                                ; 0 = 不消耗次数
                                                ; 1 = 消耗次数
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 死亡时引爆弹头 <亡语>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=WarheadDeath
```

在单位脚下引爆一排弹头，单位自己射自己，最终伤害是个整数（去尾）。  
`DamageProcessType` 属性有效。

### 注意

* 由于默认是单位自己射自己，所以弹头需要设置 `AllowDamageOnSelf=yes`（或者 `DamageSelf=yes`）才有伤害。

### 效果强度值转换：N 项参数

参数项数与 `Effect.Warheads` 的长度相匹配。  
每一项都是【对应每个弹头的伤害】：  
`0` = 没伤害，负数 = 治疗，默认值是 `0`。

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Warheads=                                ; 弹头列表 , 没有弹头直接进入结束状态
Effect.Amounts=-1                               ; 整数 , 每次引爆的弹头数量 , 负数 = 全炸一遍 , 0 = 炸不出来 , 默认值是 -1 , 单位 : 个
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Random=no                                ; yes/no , 不全部引爆时 , 是否随机选择弹头 , 不随机则从第一个一直爆到最后一个 , 然后再回到第一个 (永远从第一个弹头开始 , 引爆数量够多可以全炸好几遍) , 默认值是 no
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 原地去世 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Death
```

Buff 生效的时刻，单位原地去世。  
`DamageProcessType` 属性无效。

### 注意

* 死亡伤害可以被免疫，而且就算没有伤害也仍旧会发射弹头。

### 效果强度值转换：2 项参数

|参数|说明|
|:-:|:-|
|【原地去世的概率】|0.2 = 20% 的概率，0 = 无法去世，小于 0 按 0 算，默认值是 `0`。|
|【引爆弹头的伤害】|0 = 无伤害，负数 = 治疗，默认值是 `0`，单位：点。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【目标死亡成功时播放的动画】【目标死亡失败时播放的动画】 , 不写就不显示动画
Effect.Warheads=                                ; 弹头 , 连锁死亡使用的弹头 , 不写或留空就使用 [BuffControls] -> Warhead 的弹头
Effect.Modes=0                                  ; 整数 , 【伤害模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【伤害模式】
                                                ; 0 = 直接造成伤害 (无弹头动画) , 伤害 = [CombatDamage] -> MaxDamage
                                                ; 1 = 引爆弹头 (结算护甲) , 伤害 = 【引爆弹头的伤害】为 0 则【单位的最大生命值】
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 连锁死亡 <亡语>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=LinkedDeath
```

Buff 生效期间，如果 Buff 持有者死亡，会导致挂载此 Buff 的单位一起死亡（要求这个单位在地图上，非载员、非驻军等）。  
`DamageProcessType` 属性无效。

### 注意

* 死亡伤害可以被免疫，而且就算没有伤害也仍旧会发射弹头。

### 效果强度值转换：2 项参数

|参数|说明|
|:-:|:-|
|【连锁死亡的概率】|0.2 = 20% 的概率，0 = 无法去世，小于 0 按 0 算，默认值是 `0`。|
|【引爆弹头的伤害】|0 = 无伤害，负数 = 治疗，默认值是 `0`，单位：点。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【目标死亡成功时播放的动画】【目标死亡失败时播放的动画】 , 不写就不显示动画
Effect.Warheads=                                ; 弹头 , 连锁死亡使用的弹头 , 不写或留空就使用 [BuffControls] -> Warhead 的弹头
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Modes=0                                  ; 整数 , 【伤害模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【伤害模式】
                                                ; 0 = 直接造成伤害 (无弹头动画) , 伤害 = [CombatDamage] -> MaxDamage
                                                ; 1 = 引爆弹头 (结算护甲) , 伤害 = 【引爆弹头的伤害】为 0 则【单位的最大生命值】
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 建筑变卖 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Sell
```

Buff 生效的时刻，建筑自动变卖。  
生效后 Buff 会立刻进入结束状态。

### 注意

* 只能对建筑生效（挂载在其他单位上时没有效果）。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【变卖的概率】|0.2 = 20% 的概率，0 = 无法变卖，小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【变卖成功时播放的动画】【变卖失败时播放的动画】 , 不写就不显示动画
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 开始巡猎 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Hunt
```

Buff 生效的时刻，可以移动的单位进入 Hunt 任务。  
生效后 Buff 会立刻进入结束状态。

### 注意

* 只能对步兵和载具生效（挂载在其他单位上时没有效果）。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【巡猎的概率】|0.2 = 20% 的概率，0 = 无法巡猎，小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【进入狩猎成功时播放的动画】【进入狩猎失败时播放的动画】 , 不写就不显示动画
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 静默状态 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=StateSilent
```

Buff 生效期间，单位进入静默状态，具体表现有别于 emp 或断电（比如失去遥控中心）。  
单位会停止当前的攻击并且不接受新的指令，步兵载具愣在原地，飞机停在天上，建筑的基础功能正常运转（比如提供建造前提），AI 的生产建筑会停止生产，载员正常开火，母舰静默后子机会立即中断任务，奴矿静默后奴隶照常采矿，展开的建筑可以收起来但是无法再展开。

### 注意

* 由于逻辑冲突，此效果种类对狩猎者无效。

* 但是多个静默状态叠加时，AI 的建造时间可能出现微小的偏差。

* 效果强度值对此效果种类无效。

### 效果强度值转换：0 项参数

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【处于静默状态的单位身上循环播放的动画】 , 不写就不显示动画
Effect.AnimDelays=31                            ; 整数 , 每次播放【处于静默状态的单位身上循环播放的动画】的延迟时间 , 默认值是 31
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Owner=All                                ; 作战方归属 , 来源不符合会立刻进入结束状态 , 无来源忽略此限制 (来源所属的作战方是挂载 Buff 时刻的来源 , 而非现在 Buff 来源单位所属的作战方)
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Effect.Modes=0,0,0                              ; 三个整数 , 【建筑静默模式】【单位静默模式】【<载员>静默模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【建筑静默模式】
                                                ; 仅对建筑有效
                                                ; 0 = 掉线 (电力仍然可以正常提供 , 对一些特殊建筑无效 , 此限制暂时解决不了)
                                                ; 1 = 掉线并断电 (同上)
                                                ; 2 = 断电 (对电厂 , 矿厂和一些特殊建筑无效 , 驻军建筑无法断电但是也无法攻击 , 此限制暂时解决不了)
                                                ; 3 = 单纯无法攻击
                                                ; 【单位静默模式】
                                                ; 对可移动的单位有效
                                                ; 0 = 无法控制 , 类似于遥控坦克失去遥控中心的效果 , vxl 单位会变黑
                                                ; 1 = 无法移动 , 不响应攻击指令 , 单位仍然可以被选中 , 可以保留移动指令 (效果结束后会跑过去)
                                                ; 2 = 无法移动 , 但是可以攻击 (机场飞机慎用)
                                                ; 【<载员>静默模式】
                                                ; 当【单位静默模式】 = 1,2 时有效 , 对可以对外开火的战斗要塞类单位有效 , ifv 不算在里面 , 【单位静默模式】 = 0 时<载员>强制哑火
                                                ; 0 = <载员>也哑火
                                                ; 1 = 不影响<载员>
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 嘲讽状态 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=StateTaunt
```

Buff 生效期间，每经过一定的时间，都会把周围单位的攻击目标强制改为自己，即便这个单位无法攻击自己（即具有强制性）。

### 注意

* 由于逻辑冲突，此效果种类对【静默状态】的单位无效。

* 被嘲讽的单位并不会尝试靠近自己以求把自己纳入它的射程范围内。

* 效果强度值对此效果种类无效。

### 效果强度值转换：0 项参数

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【触发时在自己身上播放的动画】【触发时在受影响单位身上播放的动画】 , 不写就不显示动画
Effect.Technos=                                 ; 单位列表 , 如果设置了则只对这些单位生效
Effect.Counts=-1                                ; 整数 , 嘲讽次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧嘲讽一次 , 小于 0 按 0 算 , 但是每一帧最多嘲讽一次 , 默认值是 0 , 单位 : 帧
Effect.Range=0                                  ; 浮点数 , 嘲讽的范围 (半径) , 0 = 没人可嘲讽 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 格子
Effect.Owner=All                                ; 作战方归属 , 需要目标单位符合作战方
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Effect.Modes=0,0                                ; 两个整数 , 【移动攻击模式】【单位筛选模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【移动攻击模式】
                                                ; 0 = 向单位集结
                                                ; 1 = 不移动
                                                ; 2 = 仅移动不攻击
                                                ; 【单位筛选模式】
                                                ; 设置了 Effect.Technos 后才有效
                                                ; 0 = 只嘲讽 Effect.Technos 指定的单位
                                                ; 1 = 只不嘲讽 Effect.Technos 指定的单位
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 跳过主动处理阶段 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=SkipStageActive
```

Buff 生效期间，处理顺序排在此 Buff 后面的其他 Buff 会跳过【主动处理阶段】，暂不支持 Buff 类型筛选。  
跳过【主动处理阶段】带来的影响如下，在【主动处理阶段】的效果会完全失效、冷却时间不恢复、进入的状态不会更新、武器无法发射、护盾不回、生命不加等等。  
未进入生效状态的 Buff 不受此影响，一旦这个 Buff 进入了生效状态，就会立刻开始跳过【主动处理阶段】，在部分情况下，此特性可以做出强制延迟生效的效果。  
如果有多个跳过主动处理阶段效果种类的 Buff，则只有处理顺序最靠前的会正常生效，排在后面的会被跳过【主动处理阶段】。

### 注意

* 效果强度值对此效果种类无效。

### 效果强度值转换：0 项参数

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 经验值 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=EXP
```

Buff 生效期间，每经过一定的时间，会给单位增加经验值。  
另见 [获取经验值](/经验值与升级与军衔图像/属性-单位.md#获取经验值)。

### 效果强度值转换：2 项参数

|参数|说明|
|:-:|:-|
|【经验值】|0 ~ 1 = 经验值百分比（以单位当前等级的经验值消耗量测算），大于 1 = 经验值点数，负数同理，默认值是 `0`，单位：点。|
|【获得经验值的概率】|-1 = 0%，-0.2 = 20%，0 = 100%，小于 -1 按 -1 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【增加经验值时播放的动画】 , 不写就不显示动画
Effect.Counts=-1                                ; 整数 , 增加经验值的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧增加一次 , 小于 0 按 0 算 , 但是每一帧最多增加一次 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 经验池 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=EXPPool
```

Buff 生效期间，每经过一定的时间，会给阵营的经验池增加经验值。  
另见 [获取经验值](/经验值与升级与军衔图像/属性-单位.md#获取经验值)。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【经验值】|经验值点数，默认值是 `0`，单位：点。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【增加经验值时播放的动画】 , 不写就不显示动画
Effect.Counts=-1                                ; 整数 , 增加经验值的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧增加一次 , 小于 0 按 0 算 , 但是每一帧最多增加一次 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 弹药调整 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Ammo
```

Buff 会周期性地增加单位的弹药，需要单位支持弹药。

### 注意

* 概率未成功也会消耗次数。

* 满弹药仍然会尝试恢复（消耗次数）。

* 对于不支持弹药的单位会立刻进入结束状态。

### 效果强度值转换：4 项参数

|参数|说明|
|:-:|:-|
|【恢复量】|恢复的数量，0 ~ 1 = 百分比恢复，默认值是 `0`，单位：个。|
|【恢复概率】|-1 = 0%，-0.2 = 20%，0 = 100%，小于 -1 按 -1 算，默认值是 `0`。|
|【恢复量上限】|0 = 不限制（恢复到满），小于 0 按 0 算，默认值是 `0`，单位：个。|
|【恢复量下限】|小于 0 按 0 算，默认值是 `0`，单位：个。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【恢复弹药时播放的动画】 , 不写就不显示动画
Effect.Counts=-1                                ; 整数 , 恢复弹药的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧恢复一次 , 小于 0 按 0 算 , 但是每一帧最多恢复一次 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。





## 弹药检测 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=AmmoCheck
```

根据单位身上的弹药情况触发效果。  
弹药量大于上限或小于下限时视为满足条件。  
`DamageProcessType` 属性无效。

### 注意

* 由于检测间隔的存在，因此效果并不是实时的，这是出于优化的靠量，如果必要可以考虑缩短检测间隔。

* 对于不支持弹药的单位会立刻进入结束状态。

### 效果强度值转换：2+M+N 项参数

|参数|说明|
|:-:|:-|
|【弹药量上限】|检测的上限值，负数 = 不检测，小于 0 按 0 算，默认值是 `0`，单位：个。|
|【弹药量下限】|检测的下限值，负数 = 不检测，小于 0 按 0 算，默认值是 `0`，单位：个。|

后续的 M 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【挂载持续时间】：  
从第 1 个 Buff 开始（索引 0），单位的 Buff 抗性有效，会改变最终附加的挂载持续时间，附加后的挂载持续时间会被【实际数值的上下限】限制，默认值是 `0`，单位：帧。  
根据目标单位是否拥有指定的 Buff，会有不同的细节效果：

1. 如果目标单位没有指定的 Buff，则挂载此 Buff，挂载者为当前 Buff 的持有者，负数 = 永久，0 = 使用 Buff 的默认值。

2. 如果目标单位已有指定的 Buff，则延长此 Buff 的挂载持续时间，负数 = 倒扣挂载持续时间，0 = 没作用。

在此处：  
`Power.Maxs.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Max` 的值；  
`Power.Mins.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Min` 的值。

后续的 N 个参数项数与 `Effect.Warheads` 的长度相匹配。  
每一项都是【对应每个弹头的伤害】：  
从第 1 个弹头开始（索引 0），0 = 没伤害，负数 = 治疗，默认值是 `0`。

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.AcceptBuffs=                             ; Buff 列表 , 满足条件时挂载这些 Buff , 没设置就不挂载
Effect.ExceptBuffs=                             ; Buff 列表 , 不满足条件时移除这些 Buff , 没设置就不移除
Effect.Warheads=                                ; 弹头列表 , 满足条件时引爆这些弹头 , 没有弹头就炸不出来
Effect.Counts=-1                                ; 整数 , 检测的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧检测一次 , 小于 0 按 0 算 , 但是每一帧最多检测一次 , 默认值是 0 , 单位 : 帧
Effect.Amounts=-1,-1                            ; 两个整数 , 【引爆的弹头数量】【Buff 和弹头的触发时间间隔】 , 默认值是 -1
                                                ; 【引爆的弹头数量】 , 负数 = 全炸一遍 , 0 = 炸不出来 , 单位 : 个
                                                ; 【Buff 和弹头的触发时间间隔】 , 负数 = 只触发 1 次且值为初始冷却时间 (绝对值) , 0 = 不限制 , 单位 : 帧
Effect.Random=no                                ; yes/no , 不全部引爆时 , 是否随机选择弹头 , 不随机则从第一个一直炸到最后一个 , 然后再回到第一个 (永远从第一个弹头开始 , 引爆数量够多可以全炸好几遍) , 默认值是 no
Effect.Modes=0                                  ; 整数 , 【检测模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【检测模式】
                                                ; 0 = 弹药符合上下限则算满足条件
                                                ; 1 = 弹药不符合上下限则算满足条件
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 吸收矿物 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=MobileRefinery
```

Buff 生效期间，周期性的检测周围的矿物，吃掉符合要求的矿物。

### 注意

* Buff 并不会控制单位前往合适的地方，单位需要手动控制前往。

* 选取矿物格子时，选择是随机的。

* 【吸收率】不是整数时可能会导致最终获得的金额不是整数，因此小数部分会被丢弃。  
实际增加的金额是当次从所有格子获得的总额并丢弃小数部分之后的数值。

### 效果强度值转换：3 项参数

|参数|说明|
|:-:|:-|
|【吸收量】|每次最多吃下多少个格子的矿物（实际数量四舍五入），0 = 一个格子都没，小于 0 按 0 算，默认值是 `0`，单位：格子。|
|【吸收率】|吃掉的矿物转化为资金的比例，负数 = 扣钱，1 = 100%，0.2 = 20%，0 = 0%，默认值是 `0`。|
|【每个格子的最大吸收量】|这里指的是原始值，实际处理时四舍五入，负数 = 增加矿物（需要原本有矿物），0 = 无法吃矿物，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【吸收矿物时播放的动画】【吸收矿物时在矿物处播放的动画】 , 不写就不显示动画
Effect.Counts=-1                                ; 整数 , 吃掉矿物的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧吃一次矿物 , 小于 0 按 0 算 , 但是每一帧最多吃一次 , 默认值是 0 , 单位 : 帧
Effect.Range=0                                  ; 浮点数 , 吃掉矿物的半径 , 0 = 脚下的格子 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 格子
Effect.Display=yes                              ; yes/no , 是否显示收入文本 (就像油井那样) , 只显示整数部分 , 默认值是 yes
Effect.Owner=All                                ; 作战方归属 , 哪个作战方可以看到收入文本
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Effect.Modes=0                                  ; 整数 , 【形状模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【形状模式】
                                                ; 0 = Effect.Range 为半径的圆形 (性能略微低一点)
                                                ; 1 = Effect.Range 为边长的正方形 , 边长四舍五入
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 生产矿物 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=OreSpawner
```

Buff 生效期间，周期性的检测周围的格子，向可以放置矿物的格子放置矿物。

### 注意

* 选取有效格子时，选择是随机的。

* 【生产率】不是整数时可能会导致最终扣除的金额不是整数，因此小数部分会进位计算。  
实际扣除的金额是当次所有格子生产的总额并把小数部分进位之后的数值。  
此外，实际的矿物是根据矿物的 `Value` 属性来按等级划分的，栗如需要创建 `40` 价值的矿物，且矿物的 `Value=25`，那么就只能创建 `1` 级矿物，即 `25` 价值的矿物，多出来的 `15` 价值会丢失。  
原版游戏中，矿物最多拥有 12 级，虽然此 Buff 可以创建更高等级的矿物，但是实际表现可能出现偏差。

### 效果强度值转换：3 项参数

|参数|说明|
|:-:|:-|
|【生产量】|每次最多生产多少个格子的矿物（实际数量四舍五入），0 = 一个格子都没，小于 0 按 0 算，默认值是 `0`，单位：格子。|
|【生产率】|生产矿物时扣钱的比例，【生产率】不为 `0` 时没钱无法生产，负数 = 获得钱，1 = 100%，0.2 = 20%，0 = 0%，默认值是 `0`。|
|【每个格子的最大生产量】|每个格子最多生产这么多价值的矿物（详见**注意**部分），负数 = 移除矿物（需要原本有矿物），0 = 无法生产矿物，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【生产矿物时播放的动画】【生产矿物时在矿物处播放的动画】 , 不写就不显示动画
Effect.Counts=-1                                ; 整数 , 生产矿物的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧生产一次矿物 , 小于 0 按 0 算 , 但是每一帧最多生产一次 , 默认值是 0 , 单位 : 帧
Effect.Range=0                                  ; 浮点数 , 生产矿物的最大半径 , 0 = 脚下的格子 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 格子
Effect.Modes=0,0                                ; 两个整数 , 【形状模式】【矿物种类】 , 无效值默认为 0 , 默认值是 0
                                                ; 【形状模式】
                                                ; 0 = Effect.Range 为半径的圆形 (性能略微低一点)
                                                ; 1 = Effect.Range 为边长的正方形 , 边长四舍五入
                                                ; 【矿物种类】
                                                ; 这里填写矿物注册表 [Tiberiums] 的索引值 , 索引从 0 开始 , 最大支持到 255 , 无效值会弹窗
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 投放单位 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Team
```

效果等同于 AI 脚本动作 `50030,n`。  
以单位所在位置为 [原点] 创建随机单位，建筑步兵载具飞机都行，如果目标位置被占据了，则会在旁边创建。  
投放的单位归属为 Buff 的持有者，也就是被挂载 Buff 的单位所属的作战方。  
进入生效状态立刻投放一次，最终投放完毕后立刻进入结束状态。

详见 [`随机投放单位`](/触发与AI脚本动作/AI脚本动作-0-杂项.md#50030n-随机投放单位)。

### 注意

* 投放得太快太多可能造成游戏卡顿甚至崩溃。

* **通过 Buff 投放单位时，投放者是 Buff 的所有者**。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【投放的概率】|未成功投放也会消耗次数，0.2 = 20% 的概率，0 = 无法投放，小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【投放时播放的动画】 , 不写就不显示动画
Effect.DataPack=                                ; 数据包的注册名 , 注意不是填写 IDCode , 数据包含义请见【AI 脚本动作 50030,n】 , 没有数据包直接进入结束状态
Effect.Counts=-1                                ; 整数 , 投放次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每隔这么多帧投一次 , 小于 0 按 0 算 , 但是每一帧最多投一次 , 默认值是 0 , 单位 : 帧
Effect.Self=yes                                 ; yes/no , yes = 投出的单位是 Buff 所属单位的阵营 , no = 投出的单位是挂载 Buff 的单位的阵营 (需要单位存活) , 默认值是 yes
                                                ; 如果阵营不是正常的状态 (比如已经被击败) , 则 Buff 会立刻进入结束状态
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 死亡时投放单位 <亡语>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=TeamDeath
```

效果等同于 AI 脚本动作 `50030,n`。  
以单位所在位置为 [原点] 创建随机单位，建筑步兵载具飞机都行，如果目标位置被占据了，则会在旁边创建。  
投放的单位归属为 Buff 的持有者，也就是被挂载 Buff 的单位所属的作战方。  
进入生效状态立刻投放一次，最终投放完毕后立刻进入结束状态。

详见 [`随机投放单位`](/触发与AI脚本动作/AI脚本动作-0-杂项.md#50030n-随机投放单位)。

### 注意

* 投放得太快太多可能造成游戏卡顿甚至崩溃。

* **通过 Buff 投放单位时，投放者是 Buff 的所有者**。  
但是在这里，因为投放者已经凉了，所以可能有时候不能获得预期的效果。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【投放的概率】|只投放一次，0.2 = 20% 的概率，0 = 无法投放，小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【投放时播放的动画】 , 不写就不显示动画
Effect.DataPack=                                ; 数据包的注册名 , 注意不是填写 IDCode , 数据包含义请见【AI 脚本动作 50030,n】 , 没有数据包直接进入结束状态
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Self=yes                                 ; yes/no , yes = 投出的单位是 Buff 所属单位的阵营 , no = 投出的单位是挂载 Buff 的单位的阵营 (需要单位存活) , 默认值是 yes
                                                ; 如果阵营不是正常的状态 (比如已经被击败) , 则 Buff 会立刻进入结束状态
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 工厂 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Factory
```

通过鼠标点击可以提交订单，然后生产这些单位。

### 注意

* 会自动把生产完毕的建筑丢在工厂的周围，如果周围没有空间，则订单会憋住。  
如果 `Effect.Modes=` 属性导致了建筑重叠，还会引发固有弹窗，还请注意。

* 暂不支持通过鼠标点击在指定的位置建造建筑。  
暂不支持取消建造。

* 如果造到一半的时候 Buff 过期了（或被移除了），那么已经花掉的钱不退。

* 单位的建造时间不吃已有工厂的产能加成（多工厂提速）。

### 效果强度值转换：1+M+N+K+L 项参数

|参数|说明|
|:-:|:-|
|【订单数量上限】|最多可以积累这么多个订单，0 = 100 个订单，小于 0 按 0 算，默认值是 `0`，单位：个。|

后续的 M 个参数项数与 `Effect.Technos` 的长度相匹配。  
每一项都是【生产时间倍率】：  
负数 = 固定时间（实际取绝对值，单位：帧），0 = 瞬间制造，0.2 = 20% 产能，1 = 100% 产能，默认值是 `0`。  
单位的实际生产时间会因为【生产时间倍率】而改变（最少 1 帧）。  
兵营、重工等常规生产建筑的实际生产时间拥有最大和最小时间限制，但是工厂 Buff 并无此限制，还请注意。

后续的 N 个参数项数与 `Effect.Technos` 的长度相匹配。  
每一项都是【成本倍率】：  
负数 = 变成加钱，0 = 免费，0.2 = 20% 造价的成本，1 = 100% 造价的成本，默认值是 `0`。  
单位实际所需的成本会因为【成本倍率】而改变。

后续的 K 个参数项数与 `Effect.Technos` 的长度相匹配。  
每一项都是【建造数量限制】：  
负数 = 不限制，0 = 限造 1 个，正数 = 固定数值 + 1 的值（去尾），默认值是 `0`，单位：次。  
和单位的 BuildLimit 不同，这是当前 Buff 在全周期内一共就可以建造这么多次此种单位。

后续的 L 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【建造出来的单位会挂载对应 Buff 的持续时间】：  
单位的 Buff 抗性有效，会改变最终附加的挂载持续时间，附加后的挂载持续时间会被【实际数值的上下限】限制，默认值是 `0`，单位：帧。  
根据目标单位是否拥有指定的 Buff，会有不同的细节效果：

1. 如果目标单位没有指定的 Buff，则挂载此 Buff，挂载者为当前 Buff 的持有者，负数 = 永久，0 = 使用 Buff 的默认值。

2. 如果目标单位已有指定的 Buff，则延长此 Buff 的挂载持续时间，负数 = 倒扣挂载持续时间，0 = 没作用。

在此处：  
`Power.Maxs.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Max` 的值；  
`Power.Mins.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Min` 的值。

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 三个动画 , 【生产完毕时播放的动画】【生产出来的单位身上播放的动画】【生产出来的单位在高空时使用的降落伞动画】 , 不写就不显示动画
                                                ; 不写【生产出来的单位在高空时使用的降落伞动画】且需要单位降落时 , 会表现出裸降的效果
Effect.AcceptBuffs=                             ; Buff 列表 , 生产出来的单位会挂载对应的 Buff , 一个单位对应 Effect.Counts 个 Buff , 最多 6 * Effect.Counts 个
Effect.Technos=                                 ; 单位列表 , 可以生产这些单位 , 一个按钮对应一个单位 , 最多 6 个
Effect.Counts=-1                                ; 整数 , 生产出来的单位挂载的 Buff 数量 , 负数和 0 = 不使用 Buff , 默认值是 -1 , 单位 : 个
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Range=0                                  ; 浮点数 , 如果脚下没有空间 , 那么生产出来的单位最远可以出现在多远的地方 , 0 = 不限制 , 小于 0 按 0 算 , 默认值是 0
Effect.Values=0,0                               ; 两个浮点数 , 默认值是 0
                                                ; 【生产出来的单位出现的额外高度】 , 【降落模式】为不降落时此项无效 , 可以是负数 , 不用担心会把生产出来的单位埋进土里
                                                ; 【多高时才会使用降落伞】 , 【降落模式】为不降落时此项无效 , 否则直接出现在地上 , 可以是负数 (笑) , 常规状态下低于 250 左右的高度的单位会被视为在地上
Effect.ExtraCodeA=0                             ; 整数 , 【自动生产模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 0 = 不自动生产
                                                ; 1 = 自动生产 , 持续制造指定的单位
                                                ; 2 = 自动生产 , 随机选择单位
Effect.ExtraCodeB=0                             ; 整数 , 【单位类型索引】 , 无效值默认为 0 , 默认值是 0
                                                ; 【自动生产模式】为 1 时有效
                                                ; 0 及以上 = 自动生产的单位的索引值
Effect.Modes=0,0,0                              ; 三个整数 , 【按钮回弹时间】【单位投放模式】【降落模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【按钮回弹时间】
                                                ; 这个数值决定了点击按钮后 , 显示多久的按钮【点击】图像 , 最大支持到 512 , 单位 : 帧
                                                ; 这只是一个视觉效果 , 即便按钮没有回弹 , 它仍然可以被点击
                                                ; 【单位投放模式】
                                                ; 0 = 投放在脚下 , 检测碰撞
                                                ; 1 = 投放在脚下 , 不检测碰撞 (建筑重叠会引发固有弹窗 , 还请注意)
                                                ; 2 = 投放在脚下 , 不检测碰撞 , 可以移动的单位自动分散 , 就像驻军从建筑里出来那样
                                                ; 3 = 直接成为载员 , 需要有足够的载员位置
                                                ; 【降落模式】
                                                ; 0 = 不降落 , 生产出来的单位直接出现在对应的地板上
                                                ; 1 = 当工厂在空中 , 或因为额外高度使生产出来的单位的出现位置处于空中时 , 则生产出来的单位会通过降落伞降落
                                                ;     建筑本身永远位于地面上 , 但是额外高度可以使生产出来的单位出现在空中
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

|应用的数值显示|【当前值】|【最大值】|【最小值】|【增加值】|说明|
|:-|:-:|:-:|:-:|:-:|:-|
|`Digital.Primary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Secondary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Tertiary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Quaternary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Button=`|单位数量|-|-|-|点击按钮可以建造单位。|

具体属性详见 [完整结构-数值显示相关属性](/Buff/类型-Buff.md#完整结构)。



## 技能 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Skill
```

通过鼠标点击可以给当前 Buff 所属的单位挂载新的 Buff。（技能的本质就是给自己挂载 Buff）  
点击后会立刻施放技能，之后会进入冷却时间。

### 注意

* 暂不支持通过鼠标点击在指定的位置施放 Buff。

* 技能会在施放的一瞬间把成本扣除（包括预定时），成本不足时点击无效。

* 当前正在冷却的技能不显示在数字里。

### 效果强度值转换：1+M+N+K+L 项参数

|参数|说明|
|:-:|:-|
|【预定数量上限】|最多可以积累这么多个技能预定，0 = 无法预定，小于 0 按 0 算，默认值是 `0`，单位：个。|

后续的 M 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【冷却时间】：  
负数 = 初始进入冷却，固定时间（实际取绝对值），0 = 瞬间完成，正数 = 固定时间，默认值是 `0`，单位：帧。  
技能的实际冷却时间最少为 1 帧。

后续的 N 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【成本】：  
负数 = 变成加钱，0 = 免费，正数 = 扣钱，默认值是 `0`，单位：元。  
施放技能需要成本。

后续的 K 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【施放数量限制】：  
负数 = 不限制，0 = 限施放 1 个，正数 = 固定数值 + 1 的值（去尾），默认值是 `0`，单位：次。  
这是当前 Buff 在全周期内一共就可以施放这么多次此种技能。

后续的 L 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【挂载持续时间】：  
单位的 Buff 抗性有效，会改变最终附加的挂载持续时间，附加后的挂载持续时间会被【实际数值的上下限】限制，默认值是 `0`，单位：帧。  
根据目标单位是否拥有指定的 Buff，会有不同的细节效果：

1. 如果目标单位没有指定的 Buff，则挂载此 Buff，挂载者为当前 Buff 的持有者，负数 = 永久，0 = 使用 Buff 的默认值。

2. 如果目标单位已有指定的 Buff，则延长此 Buff 的挂载持续时间，负数 = 倒扣挂载持续时间，0 = 没作用。

在此处：  
`Power.Maxs.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Max` 的值；  
`Power.Mins.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Min` 的值。

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【使用技能时播放的动画】 , 不写就不显示动画
Effect.AcceptBuffs=                             ; Buff 列表 , 点击按钮时挂载这些 Buff , 一个按钮对应一个 Buff , 最多 6 个
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.ExtraCodeA=0                             ; 整数 , 【自动施放模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 0 = 不自动施放
                                                ; 1 = 自动施放 , 持续施放指定的技能
Effect.ExtraCodeB=0                             ; 整数 , 【自动施放索引】 , 无效值默认为 0 , 默认值是 0
                                                ; 【自动施放模式】为 1 时有效
                                                ; 0 及以上 = 自动施放的技能的索引值
Effect.Modes=0                                  ; 整数 , 【按钮回弹时间】 , 无效值默认为 0 , 默认值是 0
                                                ; 【按钮回弹时间】
                                                ; 这个数值决定了点击按钮后 , 显示多久的按钮【点击】图像 , 最大支持到 512 , 单位 : 帧
                                                ; 这只是一个视觉效果 , 即便按钮没有回弹 , 它仍然可以被点击
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

|应用的数值显示|【当前值】|【最大值】|【最小值】|【增加值】|说明|
|:-|:-:|:-:|:-:|:-:|:-|
|`Digital.Primary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Secondary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Tertiary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Quaternary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Button=`|技能数量|-|-|-|点击按钮可以施放技能。|

具体属性详见 [完整结构-数值显示相关属性](/Buff/类型-Buff.md#完整结构)。



## 蜂巢 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=Honeycomb
```

【蜂巢】会一直尝试补充【工蜂单位】，可以在一定程度上控制【工蜂单位】的行为。  
【蜂巢】使用自带的武器索敌，武器的 Range 即为索敌范围，武器的 ROF 即为索敌间隔，还会读取一些其他的武器属性。

### 注意

* 【工蜂单位】对单位的属性有一定的要求：  
不能是建筑类型或飞机类型；  
不能是移动速度为 0 的单位，包括受到加成影响后的速度为 0；  
需要拥有可以正常索敌的武器，不能无武器或只有弹头全 0% 等无法索敌的武器；  
应保证单位可以一直跟随 Buff 拥有者移动，使其不被意外的水面、高地等障碍阻挡。

* Buff 拥有者的移动速度不应超过【工蜂单位】的单位移动，否则会出现【工蜂单位】追不上的问题；  
即便 Buff 拥有者处于天上，【工蜂单位】最初仍然都会出现在地上。

* 出于性能考虑，【蜂巢】使用 Buff 上给出的武器索敌，因此应确保所有【工蜂单位】都能对此种方式获取的目标开火。

* 请勿使用超大 Range 的武器或超短 ROF 的武器。

### 效果强度值转换：5+M 项参数

|参数|说明|
|:-:|:-|
|【工蜂单位激活上限】|最多同时可以激活的【工蜂单位】数量（结果向上取整），负数或 0 = 1 个，默认值是 `0`，单位：个。|
|【工蜂单位产生上限】|最多可以产生的【工蜂单位】数量（结果向上取整），负数或 0 = 不限，默认值是 `0`，单位：个。|
|【工蜂单位产生时间】|每次产生【工蜂单位】时需要等待的时间，负数或 0 = 1 帧，默认值是 `0`，单位：帧。|
|【武器范围倍率】|即【蜂巢】的索敌范围倍率，-1 = 没范围，-1 ~ 0 = 范围减小，0 = 无变化，1 = 范围翻倍（小心游戏变卡），小于 -1 按 -1 算，默认值是 `0`。|
|【武器冷却时间倍率】|即【蜂巢】的索敌间隔倍率，-1 = 无间隔，-1 ~ 0 = 间隔减小，0 = 无变化，1 = 间隔翻倍，小于 -1 按 -1 算，默认值是 `0`。|

后续的 M 个参数项数与 `Effect.AcceptBuffs` 的长度相匹配。  
每一项都是【挂载持续时间】：  
单位的 Buff 抗性有效，会改变最终附加的挂载持续时间，附加后的挂载持续时间会被【实际数值的上下限】限制，默认值是 `0`，单位：帧。  
根据目标单位是否拥有指定的 Buff，会有不同的细节效果：

1. 如果目标单位没有指定的 Buff，则挂载此 Buff，挂载者为当前 Buff 的持有者，负数 = 永久，0 = 使用 Buff 的默认值。

2. 如果目标单位已有指定的 Buff，则延长此 Buff 的挂载持续时间，负数 = 倒扣挂载持续时间，0 = 没作用。

在此处：  
`Power.Maxs.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Max` 的值；  
`Power.Mins.Total` 对应项的值，其中 0 = 使用 Buff 的 `Duration.Min` 的值。

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【产生工蜂单位时播放的动画】【产生的工蜂单位身上播放的动画】 , 不写就不显示动画
Effect.AcceptBuffs=                             ; Buff 列表 , 产生的【工蜂单位】会挂载对应的 Buff , 一个【工蜂单位】对应 Effect.Counts 个 Buff
Effect.Weapons=                                 ; 武器 , 用于索敌的武器 , 没有武器直接进入结束状态 , 只能填写一个武器
Effect.Technos=                                 ; 单位列表 , 可以产生这些类型的【工蜂单位】 , 如果没有可用的单位类型则会立刻进入结束状态
Effect.Counts=-1                                ; 整数 , 产生的【工蜂单位】挂载的 Buff 数量 , 负数和 0 = 不使用 Buff , 默认值是 -1 , 单位 : 个
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Range=0                                  ; 浮点数 , 【工蜂单位】空闲时的活动范围 (半径) , 0 = 无法正常活动 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 格子
Effect.UnitType=All                             ; 单位种类 , 索敌目标需要符合类型
                                                ; 可用值 : All (无简写) , Building | B , Infantry | I , Unit | U , Aircraft | A , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多个单位种类时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配建筑和载具 : Building,Unit 或 B,U (简写可以混用 , 不要有空格)
Effect.Owner=All                                ; 作战方归属 , 索敌目标需要符合作战方
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Effect.ExtraCodeA=0                             ; 整数 , 【自动产生工蜂单位模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 0 = 自动产生【工蜂单位】
                                                ; 1 = 不自动产生【工蜂单位】
Effect.ExtraCodeB=0                             ; 整数 , 【工蜂单位类型选择模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【自动产生工蜂单位模式】为 0 时有效
                                                ; 0 = 随机选择
                                                ; 1 = 按顺序选择
                                                ; 10 以上 = 产生【工蜂单位】类型的索引值 , 索引值 = 数值 - 10
Effect.ExtraCodeC=0                             ; 整数 , 【工蜂单位工作模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 0 = 警戒
                                                ; 10 = 维修 , 治疗目标 , 如果目标生命值已满则放弃目标
                                                ; 11 = 强制维修 , 治疗目标 , 就算目标生命值已满也仍继续治疗
                                                ; 20 = 进攻 , 攻击目标
                                                ; 21 = 全体进攻 , 类似于进攻 , 但是【工蜂单位】满员之后才会开始
                                                ; 30 = 巡猎 , 巡猎和进攻不同 , 巡猎不索敌 , 而是每个【工蜂单位】自由寻找目标
                                                ; 31 = 巡猎并脱离 , 开始巡猎后会脱离 Buff 控制变成普通的单位 , Buff 也会认为此【工蜂单位】已丢失
                                                ; 32 = 全体巡猎 , 类似于巡猎 , 但是【工蜂单位】满员之后才会开始
                                                ; 33 = 全体巡猎并脱离 , 类似于巡猎并脱离 , 但是【工蜂单位】满员之后才会开始
Effect.ExtraCodeD=0                             ; 整数 , 【工蜂单位跟随模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 无目标时【工蜂单位】的状态
                                                ; 0 = 浮游
                                                ; 1 = 最小移动
                                                ; 2 = 静止
Effect.Modes=0,0                                ; 两个整数 , 【索敌模式】【工蜂单位留存模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【索敌模式】
                                                ; 0 = 随机
                                                ; 1 = 距离优先 , 距离越近越优先
                                                ; 2 = 距离优先 , 反向
                                                ; 3 = 生命值比例优先 , 生命值比例越低越优先
                                                ; 4 = 生命值比例优先 , 反向
                                                ; 5 = 生命值上限优先 , 生命值上限越低越优先
                                                ; 6 = 生命值上限优先 , 反向
                                                ; 7 = 单位价值优先 , 单位价值越低越优先
                                                ; 8 = 单位价值优先 , 反向
                                                ; 【工蜂单位留存模式】
                                                ; 决定 Buff 持续时间结束 或 被移除后 , 【工蜂单位】是否留存
                                                ; 0 = 不留存 , 【工蜂单位】会原地自爆
                                                ; 1 = 留存 , 【工蜂单位】会被释放
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

|应用的数值显示|【当前值】|【最大值】|【最小值】|【增加值】|说明|
|:-|:-:|:-:|:-:|:-:|:-|
|`Digital.Primary=`|下一个【工蜂单位】产生的剩余时间|【工蜂单位产生时间|-|-|此项不支持【血条】的缓冲残影。|
|`Digital.Secondary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Tertiary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Quaternary=`|-|-|-|-|未使用此项数值显示。|
|`Digital.Button=`|-|-|-|-|未使用按钮功能。|

具体属性详见 [完整结构-数值显示相关属性](/Buff/类型-Buff.md#完整结构)。