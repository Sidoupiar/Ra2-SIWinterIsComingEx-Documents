# Buff效果-生命值

## 生命汲取 <攻击>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=HealthVampire
```

攻击命中单位时自己恢复生命值，翻转效果倒扣生命值。  
`DamageProcessType` 属性无效（这是一个特例）。

### 注意

* 给拥有高 aoe 能力的单位使用可能会迫使游戏不得不给你看 ppt。

* 恢复弹头引发的攻击无法再次触发生命汲取。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【恢复量】|负数倒扣血（直接扣血无法把单位扣死），默认值是 `0`，单位：点。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【在自己身上播放的动画】【在目标身上播放的动画】 , 不写就不显示动画
Effect.Warheads=                                ; 弹头 , 恢复生命时使用的弹头 , 没有弹头则直接增加血量
Effect.Counts=-1                                ; 整数 , 最多可以恢复的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每次恢复后多长时间内无法再次恢复 (限制之后 aoe 攻击则只能恢复一次) , 0 = 不限制 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Owner=All                                ; 作战方归属 , 需要攻击的目标单位匹配作战方
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Effect.Modes=0,0                                ; 两个整数 , 【恢复模式】和【负数恢复模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【恢复模式】
                                                ; 0 = 实际的恢复数值 = 【恢复量】
                                                ; 1 = 实际的恢复数值 = 【恢复量】 * 原始伤害
                                                ; 【负数恢复模式】
                                                ; 0 = 恢复量为负数时恢复不生效 (负负得正 , 也就是要造成伤害时恢复不生效)
                                                ; 1 = 均生效
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 生命锁定 <主动，自身，受伤>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=HealthLock
```

当单位的生命值低于一定程度时免疫伤害，这里只免疫伤害，对于各种机制杀的情况不做限制。  
与伤害免疫不同，生命锁定还附带了 **补血** 的效果。

### 注意

* 如果一个单位生命值上限太低，比如只有 1 血，那么此效果可能无法正常工作，因为生命值不能是小数。

* 对于单位转换但是生命值不进行比例变动的逻辑，可能无法正确计算生命值的限制值。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【生命值比例下限】|0 ~ 1 = 把生命值锁定在这个比例，大于 1 = 把生命值锁定在这个数值上（无法超过生命值上限，可能会因为精度问题而差几点生命值），0 = 无法锁定生命值并立刻进入结束状态，小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【首次受到过量伤害后开始循环播放的动画】【受到过量伤害时播放的动画】 , 不写就不显示动画
Effect.AnimDelays=31                            ; 整数 , 每次播放【首次受到过量伤害后开始循环播放的动画】的延迟时间 , 默认值是 31
Effect.Timer=0                                  ; 整数 , 生效时间的最大值 , 超过时间限制会立刻进入结束状态 , 0 = 无限 , 小于 0 按 0 算 , 默认值是 0 , 单位 : 帧
Effect.Modes=0                                  ; 整数 , 【锁血模式】 , 无效值默认为 0 , 默认值是 0
                                                ; 【锁血模式】
                                                ; 0 = 把生命值锁在 Buff 生效时刻的生命值比例上 (无法超过【生命值比例下限】)
                                                ; 1 = 当生命值少于锁血限制值时 , 把生命值补到限制值
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 生命恢复 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=HealthHeal
```

可以以一定间隔恢复生命值，满血也会触发恢复（消耗次数）。

### 注意

* 不小心把生命值扣空了的话，单位会凉凉的（死亡伤害可以被免疫）。

* 恢复量可以被拥有【自身处理阶段】的 Buff 处理。

### 效果强度值转换：3 项参数

|参数|说明|
|:-:|:-|
|【恢复量】|0 ~ 1 = 百分比恢复，大于 1 = 数值恢复，负数 = 扣血，默认值是 `0`。|
|【恢复上限】|0 ~ 1 = 恢复至最大生命值百分比，大于 1 = 恢复至指定数值，负数或 0 = 不限制，默认值是 `0`。|
|【恢复下限】|0 ~ 1 = 恢复至最大生命值百分比，大于 1 = 恢复至指定数值，负数或 0 = 不限制，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【持有时循环播放的动画】【恢复生命值时播放的动画 (仅限有效恢复)】 , 不写就不显示动画
Effect.AnimDelays=31                            ; 整数 , 每次播放【持有时循环播放的动画】的延迟时间 , 默认值是 31
Effect.Counts=-1                                ; 整数 , 最多可以恢复的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每次恢复的时间间隔 , 小于 0 按 0 算 , 但是每一帧最多恢复一次 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 生命重置 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=HealthReset
```

可以以一定间隔重置单位的生命值。

### 注意

* 不可以把生命值设置成 0。

### 效果强度值转换：1 项参数

|参数|说明|
|:-:|:-|
|【重置后的生命值】|0 ~ 1 = 最大生命值百分比，大于 1 = 数值，0 = 无效（但是消耗次数），小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【重置生命值时播放的动画】 , 不写就不显示动画
Effect.Counts=-1                                ; 整数 , 最多可以重置的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.Delay=0                                  ; 整数 , 每次重置的时间间隔 , 小于 0 按 0 算 , 但是每一帧最多重置一次 , 默认值是 0 , 单位 : 帧
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 生命分配 <主动>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=HealthRealloc
```

不断分配范围内所有单位的生命值，使得所有单位的生命值百分比相等。  
若有余数，则依次给生命值最少的单位血量 +1。

### 注意

* 不可以把生命值设置成 0。

### 效果强度值转换：0 项参数

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 两个动画 , 【分配生命值时播放的动画】【被分配生命值的单位身上播放的动画】 , 不写就不显示动画
Effect.AcceptBuffs=                             ; Buff 列表 , 仅对携带这些 Buff 的单位生效
Effect.ExceptBuffs=                             ; Buff 列表 , 不对携带这些 Buff 的单位生效 , 如果两个列表都设置了就必须同时满足两个列表才行
Effect.Technos=                                 ; 单位列表 , 只对这些单位触发效果 , 不写或留空表示允许任何单位
Effect.Counts=-1                                ; 整数 , 最多可以分配血量的次数 , 次数耗尽会立刻进入结束状态 , 等于 0 会无法生效并直接进入结束状态 (算作次数耗尽) , 负数 = 无限次 , 默认值是 -1 , 单位 : 次
Effect.UnitType=All                             ; 单位种类 , 仅对这些类型的单位触发效果
                                                ; 可用值 : All (无简写) , Building | B , Infantry | I , Unit | U , Aircraft | A , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多个单位种类时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配建筑和载具 : Building,Unit 或 B,U (简写可以混用 , 不要有空格)
Effect.Owner=All                                ; 作战方归属 , 仅对这些作战方的单位触发效果
                                                ; 可用值 : All (无简写) , Self | S , Allies | A , Enemies | E , Neutral | N , 默认值是 All (不区分大小写)
                                                ; 当需要匹配多种作战方时 , 多个值之间使用 "," 符号连接即可 , 栗如同时匹配己方和敌方 : Self,Enemies 或 S,E (简写可以混用 , 不要有空格)
Effect.Delay=0                                  ; 整数 , 每隔这么多帧分配血量一次 , 小于 0 按 0 算 , 但是每一帧最多分配一次 , 默认值是 0 , 单位 : 帧
Effect.Range=0                                  ; 浮点数 , 影响的范围 (半径) ， 小于 0 按 0 算 , 默认值是 0 , 单位 : 格子
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。



## 生命约束 <主动，自身，受伤>

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
Effect.Type=HealthRestrict
```

无论生命值如何改变，都不会使单位的当前生命值超出该约束区域。

### 注意

* 如果一个单位生命值上限太低，比如只有 1 血，那么此效果可能无法正常工作，因为生命值不能是小数。

* 对于单位转换但是生命值不进行比例变动的逻辑，可能无法正确计算生命值的限制值。

### 效果强度值转换：2 项参数

|参数|说明|
|:-:|:-|
|【生命值比例下限】|单位的生命值无法低于这个值，0 ~ 1 = 生命值百分比，大于 1 = 固定生命值，小于 0 按 0 算，默认值是 `0`。|
|【生命值比例上限】|单位的生命值无法高于这个值，0 ~ 1 = 生命值百分比，大于 1 = 固定生命值，小于 0 按 0 算，默认值是 `0`。|

### 效果种类相关属性

位于 `rulesmd.ini`：

```ini
[SomeBuffType]
; 效果种类相关属性
Effect.Anims=                                   ; 动画 , 【生命值被限制时播放的动画】 , 不写就不显示动画
```

### 广播与监听相关属性

不支持广播或监听。

### 数值显示相关属性

不支持数值显示。